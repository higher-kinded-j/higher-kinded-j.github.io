<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="523px" preserveAspectRatio="none" style="width:679px;height:523px;" version="1.1" viewBox="0 0 679 523" width="679px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vwhs8w463wro" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[4f347979e1a00d433aec894ae4d0a099]
class Kind--><rect fill="#FEFECE" filter="url(#f1vwhs8w463wro)" height="32" id="Kind" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="185" y="480"/><ellipse cx="200" cy="496" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M195.9219,491.7656 L195.9219,489.6094 L203.3125,489.6094 L203.3125,491.7656 L200.8438,491.7656 L200.8438,499.8438 L203.3125,499.8438 L203.3125,502 L195.9219,502 L195.9219,499.8438 L198.3906,499.8438 L198.3906,491.7656 L195.9219,491.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="26" x="214" y="500.1543">Kind</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="25" x="248" y="477"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="23" x="249" y="489.1387">F, A</text><!--MD5=[d78f02d7e706ce436611852ea7cb1d16]
class TrampolineKind<A>--><rect fill="#FEFECE" filter="url(#f1vwhs8w463wro)" height="52.8047" id="TrampolineKind&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="150" y="350"/><ellipse cx="165" cy="366" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M160.9219,361.7656 L160.9219,359.6094 L168.3125,359.6094 L168.3125,361.7656 L165.8438,361.7656 L165.8438,369.8438 L168.3125,369.8438 L168.3125,372 L160.9219,372 L160.9219,369.8438 L163.3906,369.8438 L163.3906,361.7656 L160.9219,361.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="123" x="179" y="370.1543">TrampolineKind&lt;A&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="151" x2="304" y1="382" y2="382"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="156" y="396.2104">{nested} class Witness</text><!--MD5=[6d663b8221b859d3b153bd444bab05ae]
class TrampolineKindHelper--><rect fill="#FEFECE" filter="url(#f1vwhs8w463wro)" height="104.0234" id="TrampolineKindHelper" style="stroke: #A80036; stroke-width: 1.5;" width="443" x="6" y="8"/><ellipse cx="155.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M158.2188,29.6406 Q157.6406,29.9375 157,30.0781 Q156.3594,30.2344 155.6563,30.2344 Q153.1563,30.2344 151.8281,28.5938 Q150.5156,26.9375 150.5156,23.8125 Q150.5156,20.6875 151.8281,19.0313 Q153.1563,17.375 155.6563,17.375 Q156.3594,17.375 157,17.5313 Q157.6563,17.6875 158.2188,17.9844 L158.2188,20.7031 Q157.5938,20.125 157,19.8594 Q156.4063,19.5781 155.7813,19.5781 Q154.4375,19.5781 153.75,20.6563 Q153.0625,21.7188 153.0625,23.8125 Q153.0625,25.9063 153.75,26.9844 Q154.4375,28.0469 155.7813,28.0469 Q156.4063,28.0469 157,27.7813 Q157.5938,27.5 158.2188,26.9219 L158.2188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="136" x="175.75" y="28.1543">TrampolineKindHelper</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="448" y1="40" y2="40"/><ellipse cx="17" cy="51" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="361" x="26" y="54.2104">Trampoline&lt;A&gt; narrow(Kind&lt;TrampolineKind.Witness, A&gt; kind)</text><ellipse cx="17" cy="63.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="392" x="26" y="67.0151">Kind&lt;TrampolineKind.Witness, A&gt; widen(Trampoline&lt;A&gt; trampoline)</text><ellipse cx="17" cy="76.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="274" x="26" y="79.8198">Kind&lt;TrampolineKind.Witness, A&gt; done(A value)</text><ellipse cx="17" cy="89.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="417" x="26" y="92.6245">Kind&lt;TrampolineKind.Witness, A&gt; defer(Supplier&lt;Trampoline&lt;A&gt;&gt; next)</text><ellipse cx="17" cy="102.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="258" x="26" y="105.4292">A run(Kind&lt;TrampolineKind.Witness, A&gt; kind)</text><!--MD5=[b1f1d0d6a1403d593861efcf76156c01]
class Trampoline<A>--><rect fill="#FEFECE" filter="url(#f1vwhs8w463wro)" height="84.3516" id="Trampoline&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.5;" width="336" x="332.5" y="189"/><ellipse cx="440.25" cy="207.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M436.1719,203.7344 L436.1719,201.5781 L443.5625,201.5781 L443.5625,203.7344 L441.0938,203.7344 L441.0938,211.8125 L443.5625,211.8125 L443.5625,213.9688 L436.1719,213.9688 L436.1719,211.8125 L438.6406,211.8125 L438.6406,203.7344 L436.1719,203.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="116" x="458.75" y="205.1387">«sealed interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="97" x="468.25" y="219.1074">Trampoline&lt;A&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="333.5" x2="667.5" y1="226.9375" y2="226.9375"/><ellipse cx="343.5" cy="237.9375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="352.5" y="241.1479">A run()</text><ellipse cx="343.5" cy="250.7422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="356.5" y="253.9526">Trampoline</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="432.5" y="253.9526">map(Function&lt;A, B&gt; f)</text><ellipse cx="343.5" cy="263.5469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="356.5" y="266.7573">Trampoline</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="432.5" y="266.7573">flatMap(Function&lt;A, Trampoline</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="639.5" y="266.7573">&gt; f)</text><!--MD5=[2d0c3c6ae4c8a90c4c141a4cd5c2f8bb]
link Trampoline<A> to TrampolineKind<A>--><path d="M422.27,273.12 C381.69,294.45 332.66,320.23 293.94,340.58 " fill="none" id="Trampoline&lt;A&gt;-&gt;TrampolineKind&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="297.08,346.83,276.12,349.94,290.57,334.44,297.08,346.83" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="364.5" y="316.0669">implements</text><!--MD5=[deec3766d7934c7098b34f9c848c9f05]
link TrampolineKind<A> to Kind--><path d="M227.5,403.29 C227.5,419.81 227.5,441.48 227.5,459.61 " fill="none" id="TrampolineKind&lt;A&gt;-&gt;Kind" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="234.5,459.7,227.5,479.7,220.5,459.7,234.5,459.7" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="228.5" y="446.0669">&lt;TrampolineKind.Witness, A&gt;</text><!--MD5=[cc74d3b03bd3f54fb9d22244623d3364]
link TrampolineKindHelper to Trampoline<A>--><path d="M310.15,112.16 C348.3,135.78 393.14,163.54 429.71,186.18 " fill="none" id="TrampolineKindHelper-&gt;Trampoline&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="434.13,188.92,428.5859,180.7798,429.8796,186.2867,424.3727,187.5805,434.13,188.92" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="380.5" y="155.0669">widens/narrows</text><!--MD5=[b689526025ed80104312ad1625a6589e]
link TrampolineKindHelper to TrampolineKind<A>--><path d="M222.11,112.01 C219.89,135.44 217.59,163.6 216.5,189 C214.9,226.3 214.51,235.72 216.5,273 C217.8,297.22 220.8,324.52 223.34,344.85 " fill="none" id="TrampolineKindHelper-&gt;TrampolineKind&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="223.98,349.87,226.8161,340.4383,223.351,344.9097,218.8796,341.4447,223.98,349.87" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="217.5" y="235.5669">widens/narrows</text><!--MD5=[654273ca12f7777bb4255d87a121df06]
@startuml trampoline_kind

hide empty members

interface Kind<F, A>

interface "TrampolineKind<A>" {
  {nested} class Witness
}

class TrampolineKindHelper {
  + {static} Trampoline<A> narrow(Kind<TrampolineKind.Witness, A> kind)
  + {static} Kind<TrampolineKind.Witness, A> widen(Trampoline<A> trampoline)
  + {static} Kind<TrampolineKind.Witness, A> done(A value)
  + {static} Kind<TrampolineKind.Witness, A> defer(Supplier<Trampoline<A>> next)
  + {static} A run(Kind<TrampolineKind.Witness, A> kind)
}

interface "Trampoline<A>" <<sealed interface>> {
  + A run()
  + <B> Trampoline<B> map(Function<A, B> f)
  + <B> Trampoline<B> flatMap(Function<A, Trampoline<B>> f)
}

"Trampoline<A>" ..|> "TrampolineKind<A>" : implements
"TrampolineKind<A>" - -|> Kind : <TrampolineKind.Witness, A>
TrampolineKindHelper ..> "Trampoline<A>" : widens/narrows
TrampolineKindHelper ..> "TrampolineKind<A>" : widens/narrows

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>