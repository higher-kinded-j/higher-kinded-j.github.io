<!DOCTYPE HTML>
<html lang="en" class="latte sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lens Extensions - Higher-Kinded Types and Optics for Java</title>


        <!-- Custom HTML head -->


            <meta name="description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">


        <meta name="keywords" content="Higher-Kinded Types, Higher-Kinded-J, Higher-Kinded Java, Higher Kinded Java, HKT, Java, Optics, Lens, Prism, Traversal, Iso, Functional Programming, Monad, Functor, Applicative, Transformer, Monoid, Traverse, higherkindedj">
        
        <meta property="og:title" content="Lens Extensions - Higher-Kinded Types and Optics for Java"> 
            <meta property="og:description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://higher-kinded-j.github.io/"> 
        
        <meta property="og:image" content="https://higher-kinded-j.github.io/preview.png" />
        <meta property="og:site_name" content="Higher-Kinded-J Documentation" />
        
        
        <meta name="twitter:card" content="summary_large_image" /> <meta name="twitter:title" content="Lens Extensions - Higher-Kinded Types and Optics for Java - Higher-Kinded-J" />
        <meta name="twitter:description" content="Bringing Higher-Kinded Types and Optics to Java functional patterns" />
        <meta name="twitter:image" content="https://higher-kinded-j.github.io/preview.png" />
        <meta name="description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">
        <meta name="google-site-verification" content="X-xsiAq2cKMLOzh9dexUrX8Onx2h_YMUFgp5lHHUwSg" />
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././mdbook-admonish.css">
        <link rel="stylesheet" href=".././theme/catppuccin.css">
        <link rel="stylesheet" href=".././theme/catppuccin-admonish.css">
        <link rel="stylesheet" href=".././theme/catppuccin-alerts.css">
        <link rel="stylesheet" href=".././theme/additional-hkj.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "latte";
            const default_dark_theme = "macchiato";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('latte')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frapp√©</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        <div class="version-selector-container">
                            <select id="version-selector" class="version-selector" aria-label="Select documentation version" title="Select documentation version">
                                <option value="">Loading versions...</option>
                            </select>
                        </div>
                    </div>

                    <h1 class="menu-title">Higher-Kinded Types and Optics for Java</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/higher-kinded-j/higher-kinded-j" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/higher-kinded-j/higher-kinded-j/edit/main/hkj-book/src/optics/lens_extensions.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="lens-extensions-validated-field-operations"><a class="header" href="#lens-extensions-validated-field-operations">Lens Extensions: Validated Field Operations</a></h1>
<p><img src="../images/optics.jpg" alt="lenses.jpg" /></p>
<p>Lenses provide a composable way to focus on and update fields in immutable data structures. But what happens when those fields might be <code>null</code>, updates require validation, or operations might throw exceptions?</p>
<p>Traditional lenses work brilliantly with clean, valid data. Real-world applications, however, deal with nullable fields, validation requirements, and exception-prone operations. <strong>Lens Extensions</strong> bridge this gap by augmenting lenses with built-in support for Higher-Kinded-J's core types.</p>
<p>Think of lens extensions as <strong>safety rails</strong> for your lenses‚Äîthey catch null values, validate modifications, and handle exceptions whilst maintaining the elegance of functional composition.</p>
<h2 id="the-problem-defensive-programming-clutter"><a class="header" href="#the-problem-defensive-programming-clutter">The Problem: Defensive Programming Clutter</a></h2>
<p>Let's see what happens when we try to use lenses with real-world messy data:</p>
<div id="admonition--traditional-lens-usage-with-validation" class="admonition admonish-failure" role="note" aria-labelledby="admonition--traditional-lens-usage-with-validation-title">
<div class="admonition-title">
<div id="admonition--traditional-lens-usage-with-validation-title">
<p>‚ùå Traditional Lens Usage with Validation</p>
</div>
<a class="admonition-anchor-link" href="#admonition--traditional-lens-usage-with-validation"></a>
</div>
<div>
<pre><code class="language-java">public User updateUserEmail(User user, String newEmail) {
    Lens&lt;User, String&gt; emailLens = UserLenses.email();

    // Null checking
    if (user == null) {
        throw new NullPointerException("User cannot be null");
    }

    String currentEmail = emailLens.get(user);
    if (currentEmail == null) {
        // Now what? Set default? Throw exception?
    }

    // Validation
    if (newEmail == null || !newEmail.contains("@")) {
        throw new ValidationException("Invalid email format");
    }

    // Update
    try {
        String validated = validateEmailFormat(newEmail);
        return emailLens.set(validated, user);
    } catch (Exception e) {
        // Handle exception, but lens already called set()
        throw new RuntimeException("Update failed", e);
    }
}
</code></pre>
<p>The lens operation is buried under layers of null checks, validation, and exception handling.</p>
</div>
</div>
<div id="admonition--with-lens-extensions" class="admonition admonish-success" role="note" aria-labelledby="admonition--with-lens-extensions-title">
<div class="admonition-title">
<div id="admonition--with-lens-extensions-title">
<p>‚úÖ With Lens Extensions</p>
</div>
<a class="admonition-anchor-link" href="#admonition--with-lens-extensions"></a>
</div>
<div>
<pre><code class="language-java">public Either&lt;String, User&gt; updateUserEmail(User user, String newEmail) {
    Lens&lt;User, String&gt; emailLens = UserLenses.email();

    return modifyEither(
        emailLens,
        email -&gt; validateEmail(email),  // Returns Either&lt;String, String&gt;
        user
    );
}

private Either&lt;String, String&gt; validateEmail(String email) {
    if (email == null || !email.contains("@")) {
        return Either.left("Invalid email format");
    }
    return Either.right(email.toLowerCase());
}
</code></pre>
<p>Clean separation: the lens defines <strong>where</strong> to update, the validation function defines <strong>what</strong> is valid, and <code>Either</code> carries the result or error. No defensive programming clutter.</p>
</div>
</div>
<h2 id="available-lens-extensions"><a class="header" href="#available-lens-extensions">Available Lens Extensions</a></h2>
<p>Higher-Kinded-J provides lens extensions in the <code>LensExtensions</code> utility class. All methods are static, designed for import with <code>import static</code>:</p>
<pre><code class="language-java">import static org.higherkindedj.optics.extensions.LensExtensions.*;
</code></pre>
<div id="admonition--alternative-fluent-api" class="admonition admonish-note" role="note" aria-labelledby="admonition--alternative-fluent-api-title">
<div class="admonition-title">
<div id="admonition--alternative-fluent-api-title">
<p>üí° Alternative: Fluent API</p>
</div>
<a class="admonition-anchor-link" href="#admonition--alternative-fluent-api"></a>
</div>
<div>
<p>These extension methods are also available through the <a href="fluent_api.html">Fluent API</a>, which provides method chaining and a more discoverable interface. For example, <code>getMaybe(lens, source)</code> can also be written as <code>OpticOps.getting(source).through(lens).asMaybe()</code>.</p>
</div>
</div>
<h3 id="safe-access-methods"><a class="header" href="#safe-access-methods">Safe Access Methods</a></h3>
<p>These methods safely <strong>get</strong> values from fields that might be <code>null</code>:</p>
<h4 id="getmaybe--null-safe-field-access"><a class="header" href="#getmaybe--null-safe-field-access"><code>getMaybe</code> ‚Äî Null-Safe Field Access</a></h4>
<pre><code class="language-java">public static &lt;S, A&gt; Maybe&lt;A&gt; getMaybe(Lens&lt;S, A&gt; lens, S source)
</code></pre>
<p>Returns <code>Maybe.just(value)</code> if the field is non-null, <code>Maybe.nothing()</code> otherwise.</p>
<pre><code class="language-java">Lens&lt;UserProfile, String&gt; bioLens = UserProfileLenses.bio();

UserProfile withBio = new UserProfile("u1", "Alice", "alice@example.com", 30, "Software Engineer");
Maybe&lt;String&gt; bio = getMaybe(bioLens, withBio);  // Maybe.just("Software Engineer")

UserProfile withoutBio = new UserProfile("u2", "Bob", "bob@example.com", 25, null);
Maybe&lt;String&gt; noBio = getMaybe(bioLens, withoutBio);  // Maybe.nothing()

// Use with default
String displayBio = bio.orElse("No bio provided");
</code></pre>
<div id="admonition--when-to-use-getmaybe" class="admonition admonish-tip" role="note" aria-labelledby="admonition--when-to-use-getmaybe-title">
<div class="admonition-title">
<div id="admonition--when-to-use-getmaybe-title">
<p>üí° When to Use getMaybe</p>
</div>
<a class="admonition-anchor-link" href="#admonition--when-to-use-getmaybe"></a>
</div>
<div>
<p>Use <code>getMaybe</code> when:</p>
<ul>
<li>Accessing optional fields (bio, middle name, phone number)</li>
<li>Avoiding <code>NullPointerException</code> when calling methods on the field</li>
<li>Composing multiple optional accesses</li>
<li>Converting between optics and functional style</li>
</ul>
</div>
</div>
<h4 id="geteither--access-with-default-error"><a class="header" href="#geteither--access-with-default-error"><code>getEither</code> ‚Äî Access with Default Error</a></h4>
<pre><code class="language-java">public static &lt;S, A, E&gt; Either&lt;E, A&gt; getEither(Lens&lt;S, A&gt; lens, E error, S source)
</code></pre>
<p>Returns <code>Either.right(value)</code> if non-null, <code>Either.left(error)</code> if null.</p>
<pre><code class="language-java">Lens&lt;UserProfile, Integer&gt; ageLens = UserProfileLenses.age();

UserProfile validProfile = new UserProfile("u1", "Alice", "alice@example.com", 30, "Engineer");
Either&lt;String, Integer&gt; age = getEither(ageLens, "Age not provided", validProfile);
// Either.right(30)

UserProfile invalidProfile = new UserProfile("u2", "Bob", "bob@example.com", null, "Student");
Either&lt;String, Integer&gt; noAge = getEither(ageLens, "Age not provided", invalidProfile);
// Either.left("Age not provided")

// Use in a pipeline
String message = age.fold(
    error -&gt; "Error: " + error,
    a -&gt; "Age: " + a
);
</code></pre>
<h4 id="getvalidated--access-with-validation-error"><a class="header" href="#getvalidated--access-with-validation-error"><code>getValidated</code> ‚Äî Access with Validation Error</a></h4>
<pre><code class="language-java">public static &lt;S, A, E&gt; Validated&lt;E, A&gt; getValidated(Lens&lt;S, A&gt; lens, E error, S source)
</code></pre>
<p>Like <code>getEither</code>, but returns <code>Validated</code> for consistency with validation workflows.</p>
<pre><code class="language-java">Lens&lt;UserProfile, String&gt; emailLens = UserProfileLenses.email();

UserProfile profile = new UserProfile("u1", "Alice", "alice@example.com", 30, "Engineer");
Validated&lt;String, String&gt; email = getValidated(emailLens, "Email is required", profile);
// Validated.valid("alice@example.com")

UserProfile noEmail = new UserProfile("u2", "Bob", null, 25, "Student");
Validated&lt;String, String&gt; missing = getValidated(emailLens, "Email is required", noEmail);
// Validated.invalid("Email is required")
</code></pre>
<h3 id="modification-methods"><a class="header" href="#modification-methods">Modification Methods</a></h3>
<p>These methods <strong>modify</strong> fields with validation, null-safety, or exception handling:</p>
<h4 id="modifymaybe--optional-modifications"><a class="header" href="#modifymaybe--optional-modifications"><code>modifyMaybe</code> ‚Äî Optional Modifications</a></h4>
<pre><code class="language-java">public static &lt;S, A&gt; Maybe&lt;S&gt; modifyMaybe(
    Lens&lt;S, A&gt; lens,
    Function&lt;A, Maybe&lt;A&gt;&gt; modifier,
    S source)
</code></pre>
<p>Apply a modification that might not succeed. Returns <code>Maybe.just(updated)</code> if the modification succeeds, <code>Maybe.nothing()</code> if it fails.</p>
<pre><code class="language-java">Lens&lt;UserProfile, String&gt; nameLens = UserProfileLenses.name();
UserProfile profile = new UserProfile("u1", "Alice", "alice@example.com", 30, "Engineer");

// Successful modification
Maybe&lt;UserProfile&gt; updated = modifyMaybe(
    nameLens,
    name -&gt; name.length() &gt;= 2 ? Maybe.just(name.toUpperCase()) : Maybe.nothing(),
    profile
);
// Maybe.just(UserProfile with name "ALICE")

// Failed modification
UserProfile shortName = new UserProfile("u2", "A", "a@example.com", 25, "Student");
Maybe&lt;UserProfile&gt; failed = modifyMaybe(
    nameLens,
    name -&gt; name.length() &gt;= 2 ? Maybe.just(name.toUpperCase()) : Maybe.nothing(),
    shortName
);
// Maybe.nothing()

// Use result
String result = updated
    .map(p -&gt; "Updated: " + p.name())
    .orElse("Update failed");
</code></pre>
<div id="admonition-real-world-example-optional-formatting" class="admonition admonish-example" role="note" aria-labelledby="admonition-real-world-example-optional-formatting-title">
<div class="admonition-title">
<div id="admonition-real-world-example-optional-formatting-title">
<p>Real-World Example: Optional Formatting</p>
</div>
<a class="admonition-anchor-link" href="#admonition-real-world-example-optional-formatting"></a>
</div>
<div>
<pre><code class="language-java">Lens&lt;Product, String&gt; skuLens = ProductLenses.sku();

// Only format SKU if it matches a pattern
Maybe&lt;Product&gt; formatted = modifyMaybe(
    skuLens,
    sku -&gt; sku.matches("^[A-Z]{3}-\\d{4}$")
        ? Maybe.just(sku.toUpperCase())
        : Maybe.nothing(),  // Leave invalid SKUs unchanged
    product
);
</code></pre>
</div>
</div>
<h4 id="modifyeither--fail-fast-validation"><a class="header" href="#modifyeither--fail-fast-validation"><code>modifyEither</code> ‚Äî Fail-Fast Validation</a></h4>
<pre><code class="language-java">public static &lt;S, A, E&gt; Either&lt;E, S&gt; modifyEither(
    Lens&lt;S, A&gt; lens,
    Function&lt;A, Either&lt;E, A&gt;&gt; modifier,
    S source)
</code></pre>
<p>Apply a modification with validation. Returns <code>Either.right(updated)</code> if valid, <code>Either.left(error)</code> if invalid. <strong>Stops at first error</strong>.</p>
<pre><code class="language-java">Lens&lt;UserProfile, Integer&gt; ageLens = UserProfileLenses.age();
UserProfile profile = new UserProfile("u1", "Alice", "alice@example.com", 30, "Engineer");

// Valid modification
Either&lt;String, UserProfile&gt; updated = modifyEither(
    ageLens,
    age -&gt; {
        if (age &lt; 0) return Either.left("Age cannot be negative");
        if (age &gt; 150) return Either.left("Age must be realistic");
        return Either.right(age + 1);  // Birthday!
    },
    profile
);
// Either.right(UserProfile with age 31)

// Invalid modification
UserProfile invalidAge = new UserProfile("u2", "Bob", "bob@example.com", 200, "Time traveller");
Either&lt;String, UserProfile&gt; failed = modifyEither(
    ageLens,
    age -&gt; {
        if (age &lt; 0) return Either.left("Age cannot be negative");
        if (age &gt; 150) return Either.left("Age must be realistic");
        return Either.right(age + 1);
    },
    invalidAge
);
// Either.left("Age must be realistic")

// Display result
String message = updated.fold(
    error -&gt; "‚ùå " + error,
    user -&gt; "‚úÖ Updated age to " + user.age()
);
</code></pre>
<div id="admonition--when-to-use-modifyeither" class="admonition admonish-tip" role="note" aria-labelledby="admonition--when-to-use-modifyeither-title">
<div class="admonition-title">
<div id="admonition--when-to-use-modifyeither-title">
<p>üí° When to Use modifyEither</p>
</div>
<a class="admonition-anchor-link" href="#admonition--when-to-use-modifyeither"></a>
</div>
<div>
<p>Use <code>modifyEither</code> for <strong>fail-fast</strong> validation:</p>
<ul>
<li>Single field updates where you want to stop at the first error</li>
<li>API request validation (reject immediately if any field is invalid)</li>
<li>Form submissions where you show the first error encountered</li>
<li>Operations where continuing after an error doesn't make sense</li>
</ul>
</div>
</div>
<h4 id="modifyvalidated--validated-modifications"><a class="header" href="#modifyvalidated--validated-modifications"><code>modifyValidated</code> ‚Äî Validated Modifications</a></h4>
<pre><code class="language-java">public static &lt;S, A, E&gt; Validated&lt;E, S&gt; modifyValidated(
    Lens&lt;S, A&gt; lens,
    Function&lt;A, Validated&lt;E, A&gt;&gt; modifier,
    S source)
</code></pre>
<p>Like <code>modifyEither</code>, but returns <code>Validated</code> for consistency with error accumulation workflows.</p>
<pre><code class="language-java">Lens&lt;UserProfile, String&gt; emailLens = UserProfileLenses.email();
UserProfile profile = new UserProfile("u1", "Alice", "old@example.com", 30, "Engineer");

// Valid email format
Validated&lt;String, UserProfile&gt; updated = modifyValidated(
    emailLens,
    email -&gt; {
        if (!email.contains("@")) {
            return Validated.invalid("Email must contain @");
        }
        if (!email.endsWith(".com") &amp;&amp; !email.endsWith(".co.uk")) {
            return Validated.invalid("Email must end with .com or .co.uk");
        }
        return Validated.valid(email.toLowerCase());
    },
    profile
);
// Validated.valid(UserProfile with email "old@example.com")

// Invalid email format
UserProfile badEmail = new UserProfile("u2", "Bob", "invalid-email", 25, "Student");
Validated&lt;String, UserProfile&gt; failed = modifyValidated(
    emailLens,
    email -&gt; {
        if (!email.contains("@")) {
            return Validated.invalid("Email must contain @");
        }
        if (!email.endsWith(".com") &amp;&amp; !email.endsWith(".co.uk")) {
            return Validated.invalid("Email must end with .com or .co.uk");
        }
        return Validated.valid(email.toLowerCase());
    },
    badEmail
);
// Validated.invalid("Email must contain @")
</code></pre>
<div id="admonition--either-vs-validated-for-single-fields" class="admonition admonish-tip" role="note" aria-labelledby="admonition--either-vs-validated-for-single-fields-title">
<div class="admonition-title">
<div id="admonition--either-vs-validated-for-single-fields-title">
<p>üí° Either vs Validated for Single Fields</p>
</div>
<a class="admonition-anchor-link" href="#admonition--either-vs-validated-for-single-fields"></a>
</div>
<div>
<p>For <strong>single field</strong> validation, <code>modifyEither</code> and <code>modifyValidated</code> behave identically (both fail fast). The difference matters when validating <strong>multiple fields</strong>‚Äîuse <code>Validated</code> when you want to accumulate errors across fields.</p>
</div>
</div>
<h4 id="modifytry--exception-safe-modifications"><a class="header" href="#modifytry--exception-safe-modifications"><code>modifyTry</code> ‚Äî Exception-Safe Modifications</a></h4>
<pre><code class="language-java">public static &lt;S, A&gt; Try&lt;S&gt; modifyTry(
    Lens&lt;S, A&gt; lens,
    Function&lt;A, Try&lt;A&gt;&gt; modifier,
    S source)
</code></pre>
<p>Apply a modification that might throw exceptions. Returns <code>Try.success(updated)</code> if successful, <code>Try.failure(exception)</code> if an exception occurred.</p>
<pre><code class="language-java">Lens&lt;UserProfile, String&gt; emailLens = UserProfileLenses.email();
UserProfile profile = new UserProfile("u1", "Alice", "alice@example.com", 30, "Engineer");

// Successful database update
Try&lt;UserProfile&gt; updated = modifyTry(
    emailLens,
    email -&gt; Try.of(() -&gt; updateEmailInDatabase(email)),
    profile
);
// Try.success(UserProfile with updated email)

// Failed database update
UserProfile badEmail = new UserProfile("u2", "Bob", "fail@example.com", 25, "Student");
Try&lt;UserProfile&gt; failed = modifyTry(
    emailLens,
    email -&gt; Try.of(() -&gt; updateEmailInDatabase(email)),
    badEmail
);
// Try.failure(RuntimeException: "Database connection failed")

// Handle result
updated.match(
    user -&gt; logger.info("Email updated: {}", user.email()),
    error -&gt; logger.error("Update failed", error)
);
</code></pre>
<div id="admonition-real-world-example-database-operations" class="admonition admonish-example" role="note" aria-labelledby="admonition-real-world-example-database-operations-title">
<div class="admonition-title">
<div id="admonition-real-world-example-database-operations-title">
<p>Real-World Example: Database Operations</p>
</div>
<a class="admonition-anchor-link" href="#admonition-real-world-example-database-operations"></a>
</div>
<div>
<pre><code class="language-java">// Update user's profile picture by uploading to S3
Lens&lt;User, String&gt; profilePictureLens = UserLenses.profilePictureUrl();

Try&lt;User&gt; result = modifyTry(
    profilePictureLens,
    oldUrl -&gt; Try.of(() -&gt; {
        // Upload new image to S3 (might throw IOException, AmazonS3Exception)
        String newUrl = s3Client.uploadImage(imageData);
        // Delete old image if it exists
        if (oldUrl != null &amp;&amp; !oldUrl.isEmpty()) {
            s3Client.deleteImage(oldUrl);
        }
        return newUrl;
    }),
    user
);

result.match(
    updated -&gt; sendSuccessResponse(updated),
    error -&gt; sendErrorResponse("Image upload failed: " + error.getMessage())
);
</code></pre>
</div>
</div>
<h4 id="setifvalid--conditional-updates"><a class="header" href="#setifvalid--conditional-updates"><code>setIfValid</code> ‚Äî Conditional Updates</a></h4>
<pre><code class="language-java">public static &lt;S, A, E&gt; Either&lt;E, S&gt; setIfValid(
    Lens&lt;S, A&gt; lens,
    Function&lt;A, Either&lt;E, A&gt;&gt; validator,
    A newValue,
    S source)
</code></pre>
<p>Set a new value <strong>only if it passes validation</strong>. Unlike <code>modifyEither</code>, you provide the new value directly rather than deriving it from the old value.</p>
<pre><code class="language-java">Lens&lt;UserProfile, String&gt; nameLens = UserProfileLenses.name();
UserProfile profile = new UserProfile("u1", "Alice", "alice@example.com", 30, "Engineer");

// Valid name format
Either&lt;String, UserProfile&gt; updated = setIfValid(
    nameLens,
    name -&gt; {
        if (name.length() &lt; 2) {
            return Either.left("Name must be at least 2 characters");
        }
        if (!name.matches("[A-Z][a-z]+")) {
            return Either.left("Name must start with capital letter");
        }
        return Either.right(name);
    },
    "Robert",
    profile
);
// Either.right(UserProfile with name "Robert")

// Invalid name format
Either&lt;String, UserProfile&gt; failed = setIfValid(
    nameLens,
    name -&gt; {
        if (name.length() &lt; 2) {
            return Either.left("Name must be at least 2 characters");
        }
        if (!name.matches("[A-Z][a-z]+")) {
            return Either.left("Name must start with capital letter");
        }
        return Either.right(name);
    },
    "bob123",
    profile
);
// Either.left("Name must start with capital letter")
</code></pre>
<div id="admonition--setifvalid-vs-modifyeither" class="admonition admonish-tip" role="note" aria-labelledby="admonition--setifvalid-vs-modifyeither-title">
<div class="admonition-title">
<div id="admonition--setifvalid-vs-modifyeither-title">
<p>üí° setIfValid vs modifyEither</p>
</div>
<a class="admonition-anchor-link" href="#admonition--setifvalid-vs-modifyeither"></a>
</div>
<div>
<p><strong>Use <code>setIfValid</code> when:</strong></p>
<ul>
<li>The new value comes from user input or external source</li>
<li>You're not transforming the old value</li>
<li>You want to validate before setting</li>
</ul>
<p><strong>Use <code>modifyEither</code> when:</strong></p>
<ul>
<li>The new value is derived from the old value (e.g., incrementing, formatting)</li>
<li>You're transforming the current value</li>
</ul>
</div>
</div>
<h2 id="composing-lens-extensions"><a class="header" href="#composing-lens-extensions">Composing Lens Extensions</a></h2>
<p>Lens extensions compose naturally with other optics operations:</p>
<h3 id="chaining-multiple-updates"><a class="header" href="#chaining-multiple-updates">Chaining Multiple Updates</a></h3>
<pre><code class="language-java">UserProfile original = new UserProfile("u1", "alice", "ALICE@EXAMPLE.COM", 30, null);

Lens&lt;UserProfile, String&gt; nameLens = UserProfileLenses.name();
Lens&lt;UserProfile, String&gt; emailLens = UserProfileLenses.email();

// Chain multiple validations
Either&lt;String, UserProfile&gt; result = modifyEither(
    nameLens,
    name -&gt; Either.right(capitalize(name)),
    original
).flatMap(user -&gt;
    modifyEither(
        emailLens,
        email -&gt; Either.right(email.toLowerCase()),
        user
    )
);
// Either.right(UserProfile with name "Alice", email "alice@example.com")
</code></pre>
<h3 id="nested-structure-updates"><a class="header" href="#nested-structure-updates">Nested Structure Updates</a></h3>
<pre><code class="language-java">@GenerateLenses
record Address(String street, String city, String postcode) {}

@GenerateLenses
record User(String name, Address address) {}

Lens&lt;User, Address&gt; addressLens = UserLenses.address();
Lens&lt;Address, String&gt; postcodeLens = AddressLenses.postcode();
Lens&lt;User, String&gt; userPostcodeLens = addressLens.andThen(postcodeLens);

User user = new User("Alice", new Address("123 Main St", "London", "SW1A 1AA"));

// Validate and update nested field
Either&lt;String, User&gt; updated = modifyEither(
    userPostcodeLens,
    postcode -&gt; validatePostcode(postcode),
    user
);
</code></pre>
<h2 id="common-patterns"><a class="header" href="#common-patterns">Common Patterns</a></h2>
<h3 id="pattern-1-form-validation"><a class="header" href="#pattern-1-form-validation">Pattern 1: Form Validation</a></h3>
<p>Validating individual form fields with immediate feedback:</p>
<pre><code class="language-java">public Either&lt;String, UserProfile&gt; validateAndUpdateEmail(
    UserProfile profile,
    String newEmail
) {
    Lens&lt;UserProfile, String&gt; emailLens = UserProfileLenses.email();

    return modifyEither(
        emailLens,
        email -&gt; {
            if (email == null || email.isEmpty()) {
                return Either.left("Email is required");
            }
            if (!email.contains("@")) {
                return Either.left("Email must contain @");
            }
            if (!email.matches("^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+$")) {
                return Either.left("Email format is invalid");
            }
            return Either.right(email.toLowerCase());
        },
        profile
    );
}
</code></pre>
<h3 id="pattern-2-safe-field-access-with-default"><a class="header" href="#pattern-2-safe-field-access-with-default">Pattern 2: Safe Field Access with Default</a></h3>
<p>Safely accessing nullable fields and providing defaults:</p>
<pre><code class="language-java">Lens&lt;UserProfile, String&gt; bioLens = UserProfileLenses.bio();

String displayBio = getMaybe(bioLens, profile)
    .orElse("No bio provided");

// Or with transformation
String formattedBio = getMaybe(bioLens, profile)
    .map(bio -&gt; bio.length() &gt; 100 ? bio.substring(0, 100) + "..." : bio)
    .orElse("No bio");
</code></pre>
<h3 id="pattern-3-database-operations-with-exception-handling"><a class="header" href="#pattern-3-database-operations-with-exception-handling">Pattern 3: Database Operations with Exception Handling</a></h3>
<p>Performing database updates that might fail:</p>
<pre><code class="language-java">public Try&lt;User&gt; updateUserInDatabase(User user, String newEmail) {
    Lens&lt;User, String&gt; emailLens = UserLenses.email();

    return modifyTry(
        emailLens,
        email -&gt; Try.of(() -&gt; {
            // Validate email is unique in database
            if (emailExists(email)) {
                throw new DuplicateEmailException("Email already in use");
            }
            // Update in database
            database.updateEmail(user.id(), email);
            return email;
        }),
        user
    );
}
</code></pre>
<h2 id="beforeafter-comparison"><a class="header" href="#beforeafter-comparison">Before/After Comparison</a></h2>
<p>Let's see a complete real-world scenario:</p>
<p><strong>Scenario:</strong> User profile update form with validation.</p>
<div id="admonition--traditional-approach" class="admonition admonish-failure" role="note" aria-labelledby="admonition--traditional-approach-title">
<div class="admonition-title">
<div id="admonition--traditional-approach-title">
<p>‚ùå Traditional Approach</p>
</div>
<a class="admonition-anchor-link" href="#admonition--traditional-approach"></a>
</div>
<div>
<pre><code class="language-java">public class UserProfileUpdater {
    public UserProfile updateProfile(
        UserProfile profile,
        String newEmail,
        Integer newAge,
        String newBio
    ) throws ValidationException {
        // Email validation
        if (newEmail != null) {
            if (!newEmail.contains("@")) {
                throw new ValidationException("Invalid email");
            }
            profile = new UserProfile(
                profile.userId(),
                profile.name(),
                newEmail.toLowerCase(),
                profile.age(),
                profile.bio()
            );
        }

        // Age validation
        if (newAge != null) {
            if (newAge &lt; 0 || newAge &gt; 150) {
                throw new ValidationException("Invalid age");
            }
            profile = new UserProfile(
                profile.userId(),
                profile.name(),
                profile.email(),
                newAge,
                profile.bio()
            );
        }

        // Bio update (optional)
        if (newBio != null &amp;&amp; newBio.length() &gt; 10) {
            profile = new UserProfile(
                profile.userId(),
                profile.name(),
                profile.email(),
                profile.age(),
                newBio
            );
        }

        return profile;
    }
}
</code></pre>
<p>Problems:</p>
<ul>
<li>Repeated record construction (error-prone)</li>
<li>Mixed validation and update logic</li>
<li>Throws exceptions (not functional)</li>
<li>Can't collect multiple errors</li>
<li>Hard to test individual validations</li>
</ul>
</div>
</div>
<div id="admonition--with-lens-extensions-1" class="admonition admonish-success" role="note" aria-labelledby="admonition--with-lens-extensions-1-title">
<div class="admonition-title">
<div id="admonition--with-lens-extensions-1-title">
<p>‚úÖ With Lens Extensions</p>
</div>
<a class="admonition-anchor-link" href="#admonition--with-lens-extensions-1"></a>
</div>
<div>
<pre><code class="language-java">public class UserProfileUpdater {
    public Either&lt;List&lt;String&gt;, UserProfile&gt; updateProfile(
        UserProfile profile,
        String newEmail,
        Integer newAge,
        String newBio
    ) {
        Lens&lt;UserProfile, String&gt; emailLens = UserProfileLenses.email();
        Lens&lt;UserProfile, Integer&gt; ageLens = UserProfileLenses.age();
        Lens&lt;UserProfile, String&gt; bioLens = UserProfileLenses.bio();

        // Update email
        Either&lt;String, UserProfile&gt; emailResult =
            modifyEither(emailLens, this::validateEmail, profile);

        // Update age
        Either&lt;String, UserProfile&gt; ageResult =
            emailResult.flatMap(p -&gt; modifyEither(ageLens, this::validateAge, p));

        // Update bio (optional)
        Either&lt;String, UserProfile&gt; finalResult =
            ageResult.flatMap(p -&gt; modifyMaybe(bioLens, this::formatBio, p)
                .map(Either::&lt;String, UserProfile&gt;right)
                .orElse(Either.right(p)));

        return finalResult.mapLeft(List::of);
    }

    private Either&lt;String, String&gt; validateEmail(String email) {
        if (!email.contains("@")) {
            return Either.left("Email must contain @");
        }
        return Either.right(email.toLowerCase());
    }

    private Either&lt;String, Integer&gt; validateAge(Integer age) {
        if (age &lt; 0 || age &gt; 150) {
            return Either.left("Age must be between 0 and 150");
        }
        return Either.right(age);
    }

    private Maybe&lt;String&gt; formatBio(String bio) {
        return bio.length() &gt; 10 ? Maybe.just(bio) : Maybe.nothing();
    }
}
</code></pre>
<p>Benefits:</p>
<ul>
<li>Clean separation of concerns</li>
<li>Functional error handling</li>
<li>Each validation is testable in isolation</li>
<li>Lenses handle immutable updates</li>
<li>Clear data flow</li>
</ul>
</div>
</div>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<div id="admonition--choose-the-right-extension-method" class="admonition admonish-tip" role="note" aria-labelledby="admonition--choose-the-right-extension-method-title">
<div class="admonition-title">
<div id="admonition--choose-the-right-extension-method-title">
<p>üí° Choose the Right Extension Method</p>
</div>
<a class="admonition-anchor-link" href="#admonition--choose-the-right-extension-method"></a>
</div>
<div>
<p><strong>Use <code>getMaybe</code></strong> when accessing optional fields</p>
<p><strong>Use <code>modifyEither</code></strong> for fail-fast single field validation</p>
<p><strong>Use <code>modifyValidated</code></strong> for consistency with multi-field validation (error accumulation)</p>
<p><strong>Use <code>modifyTry</code></strong> for operations that throw exceptions (database, I/O, network)</p>
<p><strong>Use <code>setIfValid</code></strong> when setting user-provided values with validation</p>
</div>
</div>
<div id="admonition--keep-validation-functions-pure" class="admonition admonish-tip" role="note" aria-labelledby="admonition--keep-validation-functions-pure-title">
<div class="admonition-title">
<div id="admonition--keep-validation-functions-pure-title">
<p>üí° Keep Validation Functions Pure</p>
</div>
<a class="admonition-anchor-link" href="#admonition--keep-validation-functions-pure"></a>
</div>
<div>
<p>Your validation and modification functions should be pure:</p>
<pre><code class="language-java">// ‚úÖ Pure validation
private Either&lt;String, String&gt; validateEmail(String email) {
    if (!email.contains("@")) {
        return Either.left("Invalid email");
    }
    return Either.right(email.toLowerCase());
}

// ‚ùå Impure validation (has side effects)
private Either&lt;String, String&gt; validateEmail(String email) {
    logger.info("Validating email: {}", email);  // Side effect!
    if (!email.contains("@")) {
        return Either.left("Invalid email");
    }
    return Either.right(email.toLowerCase());
}
</code></pre>
<p>Pure functions are easier to test, reason about, and compose.</p>
</div>
</div>
<div id="admonition--lens-extensions-dont-handle-null-sources" class="admonition admonish-warning" role="note" aria-labelledby="admonition--lens-extensions-dont-handle-null-sources-title">
<div class="admonition-title">
<div id="admonition--lens-extensions-dont-handle-null-sources-title">
<p>‚ö†Ô∏è Lens Extensions Don't Handle Null Sources</p>
</div>
<a class="admonition-anchor-link" href="#admonition--lens-extensions-dont-handle-null-sources"></a>
</div>
<div>
<p>Lens extensions handle <code>null</code> <strong>field values</strong>, but not <code>null</code> <strong>source objects</strong>:</p>
<pre><code class="language-java">UserProfile profile = null;
Maybe&lt;String&gt; bio = getMaybe(bioLens, profile);  // NullPointerException!

// Wrap the source in Maybe first
Maybe&lt;UserProfile&gt; maybeProfile = Maybe.fromNullable(profile);
Maybe&lt;String&gt; safeBio = maybeProfile.flatMap(p -&gt; getMaybe(bioLens, p));
</code></pre>
</div>
</div>
<h2 id="working-example"><a class="header" href="#working-example">Working Example</a></h2>
<p>For a complete, runnable demonstration of all lens extension patterns, see:</p>
<div id="admonition-lensextensionsexamplejava" class="admonition admonish-example" role="note" aria-labelledby="admonition-lensextensionsexamplejava-title">
<div class="admonition-title">
<div id="admonition-lensextensionsexamplejava-title">
<p>LensExtensionsExample.java</p>
</div>
<a class="admonition-anchor-link" href="#admonition-lensextensionsexamplejava"></a>
</div>
<div>
<p><a href="https://github.com/higher-kinded-j/higher-kinded-j/blob/main/hkj-examples/src/main/java/org/higherkindedj/example/optics/LensExtensionsExample.java">View the complete example ‚Üí</a></p>
<p>This example demonstrates:</p>
<ul>
<li>All lens extension methods</li>
<li>User profile management with validation</li>
<li>Null-safe field access</li>
<li>Exception-safe database operations</li>
<li>Form validation patterns</li>
<li>Real-world scenarios with before/after comparisons</li>
</ul>
</div>
</div>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Lens extensions provide:</p>
<p>üõ°Ô∏è <strong>Safety Rails</strong> ‚Äî Handle null values, validation, and exceptions without cluttering business logic</p>
<p>üéØ <strong>Separation of Concerns</strong> ‚Äî Lenses define structure, validators define rules, core types carry results</p>
<p>üîÑ <strong>Composability</strong> ‚Äî Chain multiple validations and updates in a functional pipeline</p>
<p>üìä <strong>Error Handling</strong> ‚Äî Choose fail-fast (<code>Either</code>) or exception-safe (<code>Try</code>) based on your needs</p>
<p>üß™ <strong>Testability</strong> ‚Äî Validation logic is pure and easy to test in isolation</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>Now that you understand lens extensions for individual fields, learn how to process collections with validation and error handling:</p>
<p><strong>Next:</strong> <a href="traversal_extensions.html">Traversal Extensions: Bulk Operations</a></p>
<p>Or return to the overview:</p>
<p><strong>Back:</strong> <a href="core_type_integration.html">Working with Core Types and Optics</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../optics/core_type_prisms.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../optics/traversal_extensions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../optics/core_type_prisms.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../optics/traversal_extensions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../version-switcher.js"></script>
        <script src=".././theme/version-switcher.js"></script>


    </div>
    </body>
</html>
