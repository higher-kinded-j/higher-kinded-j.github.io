<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="290px" preserveAspectRatio="none" style="width:1297px;height:290px;" version="1.1" viewBox="0 0 1297 290" width="1297px" zoomAndPan="magnify"><defs><filter height="300%" id="fptncj9lwt5z5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b1f1d0d6a1403d593861efcf76156c01]
class Trampoline<A>--><rect fill="#FEFECE" filter="url(#fptncj9lwt5z5)" height="122.7656" id="Trampoline&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.5;" width="339" x="315" y="8"/><ellipse cx="424.25" cy="26.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M420.1719,22.7344 L420.1719,20.5781 L427.5625,20.5781 L427.5625,22.7344 L425.0938,22.7344 L425.0938,30.8125 L427.5625,30.8125 L427.5625,32.9688 L420.1719,32.9688 L420.1719,30.8125 L422.6406,30.8125 L422.6406,22.7344 L420.1719,22.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="116" x="442.75" y="24.1387">«sealed interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="97" x="452.25" y="38.1074">Trampoline&lt;A&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="653" y1="45.9375" y2="45.9375"/><ellipse cx="326" cy="56.9375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="170" x="335" y="60.1479">Trampoline&lt;A&gt; done(A value)</text><ellipse cx="326" cy="69.7422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="313" x="335" y="72.9526">Trampoline&lt;A&gt; defer(Supplier&lt;Trampoline&lt;A&gt;&gt; next)</text><ellipse cx="326" cy="82.5469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="339" y="85.7573">Trampoline</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="415" y="85.7573">map(Function&lt;A, B&gt; f)</text><ellipse cx="326" cy="95.3516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="339" y="98.562">Trampoline</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="415" y="98.562">flatMap(Function&lt;A, Trampoline</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="622" y="98.562">&gt; f)</text><ellipse cx="326" cy="108.1563" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="335" y="111.3667">A run()</text><ellipse cx="326" cy="120.9609" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="335" y="124.1714">A runT()</text><!--MD5=[c82e326acc4956d7835042e1b5653495]
class Done<A>--><rect fill="#FEFECE" filter="url(#fptncj9lwt5z5)" height="58.7422" id="Done&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="6" y="214.5"/><ellipse cx="21" cy="233.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M23.9688,239.1094 Q23.3906,239.4063 22.75,239.5469 Q22.1094,239.7031 21.4063,239.7031 Q18.9063,239.7031 17.5781,238.0625 Q16.2656,236.4063 16.2656,233.2813 Q16.2656,230.1563 17.5781,228.5 Q18.9063,226.8438 21.4063,226.8438 Q22.1094,226.8438 22.75,227 Q23.4063,227.1563 23.9688,227.4531 L23.9688,230.1719 Q23.3438,229.5938 22.75,229.3281 Q22.1563,229.0469 21.5313,229.0469 Q20.1875,229.0469 19.5,230.125 Q18.8125,231.1875 18.8125,233.2813 Q18.8125,235.375 19.5,236.4531 Q20.1875,237.5156 21.5313,237.5156 Q22.1563,237.5156 22.75,237.25 Q23.3438,236.9688 23.9688,236.3906 L23.9688,239.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="55" x="38" y="230.6387">«record»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="35" y="244.6074">Done&lt;A&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="98" y1="252.4375" y2="252.4375"/><ellipse cx="17" cy="263.4375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="26" y="266.6479">A value</text><!--MD5=[e873876e610f921521d003cca9f1fb3b]
class More<A>--><rect fill="#FEFECE" filter="url(#fptncj9lwt5z5)" height="58.7422" id="More&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.5;" width="208" x="380.5" y="214.5"/><ellipse cx="450.75" cy="233.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M453.7188,239.1094 Q453.1406,239.4063 452.5,239.5469 Q451.8594,239.7031 451.1563,239.7031 Q448.6563,239.7031 447.3281,238.0625 Q446.0156,236.4063 446.0156,233.2813 Q446.0156,230.1563 447.3281,228.5 Q448.6563,226.8438 451.1563,226.8438 Q451.8594,226.8438 452.5,227 Q453.1563,227.1563 453.7188,227.4531 L453.7188,230.1719 Q453.0938,229.5938 452.5,229.3281 Q451.9063,229.0469 451.2813,229.0469 Q449.9375,229.0469 449.25,230.125 Q448.5625,231.1875 448.5625,233.2813 Q448.5625,235.375 449.25,236.4531 Q449.9375,237.5156 451.2813,237.5156 Q451.9063,237.5156 452.5,237.25 Q453.0938,236.9688 453.7188,236.3906 L453.7188,239.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="55" x="473.25" y="230.6387">«record»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="471.25" y="244.6074">More&lt;A&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="381.5" x2="587.5" y1="252.4375" y2="252.4375"/><ellipse cx="391.5" cy="263.4375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="400.5" y="266.6479">Supplier&lt;Trampoline&lt;A&gt;&gt; next</text><!--MD5=[be0df15bc414f5cc515c92c13d801d7f]
class FlatMap<A, B>--><rect fill="#FEFECE" filter="url(#fptncj9lwt5z5)" height="71.5469" id="FlatMap&lt;A, B&gt;" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="869" y="208"/><ellipse cx="908.3" cy="226.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M911.2688,232.6094 Q910.6906,232.9063 910.05,233.0469 Q909.4094,233.2031 908.7063,233.2031 Q906.2063,233.2031 904.8781,231.5625 Q903.5656,229.9063 903.5656,226.7813 Q903.5656,223.6563 904.8781,222 Q906.2063,220.3438 908.7063,220.3438 Q909.4094,220.3438 910.05,220.5 Q910.7063,220.6563 911.2688,220.9531 L911.2688,223.6719 Q910.6438,223.0938 910.05,222.8281 Q909.4563,222.5469 908.8313,222.5469 Q907.4875,222.5469 906.8,223.625 Q906.1125,224.6875 906.1125,226.7813 Q906.1125,228.875 906.8,229.9531 Q907.4875,231.0156 908.8313,231.0156 Q909.4563,231.0156 910.05,230.75 Q910.6438,230.4688 911.2688,229.8906 L911.2688,232.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="55" x="946.7" y="224.1387">«record»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="927.7" y="238.1074">FlatMap&lt;A, B&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="870" x2="1047" y1="245.9375" y2="245.9375"/><ellipse cx="880" cy="256.9375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="889" y="260.1479">Trampoline&lt;A&gt; sub</text><ellipse cx="880" cy="269.7422" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="889" y="272.9526">Function&lt;A, Trampoline</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1024" y="272.9526">&gt; f</text><path d="M134,224 L134,240 L99.25,244 L134,248 L134,264.2656 A0,0 0 0 0 134,264.2656 L345,264.2656 A0,0 0 0 0 345,264.2656 L345,234 L335,224 L134,224 A0,0 0 0 0 134,224 " fill="#FBFB77" filter="url(#fptncj9lwt5z5)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M335,224 L335,234 L345,234 L335,224 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="140" y="241.0669">Represents a completed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="140" y="256.1997">computation with a final value</text><path d="M623.5,224 L623.5,240 L588.87,244 L623.5,248 L623.5,264.2656 A0,0 0 0 0 623.5,264.2656 L833.5,264.2656 A0,0 0 0 0 833.5,264.2656 L833.5,234 L823.5,224 L623.5,224 A0,0 0 0 0 623.5,224 " fill="#FBFB77" filter="url(#fptncj9lwt5z5)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M823.5,224 L823.5,234 L833.5,234 L823.5,224 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="629.5" y="241.0669">Represents a suspended</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="629.5" y="256.1997">computation (deferred thunk)</text><path d="M1083.5,224 L1083.5,240 L1048.11,244 L1083.5,248 L1083.5,264.2656 A0,0 0 0 0 1083.5,264.2656 L1285.5,264.2656 A0,0 0 0 0 1285.5,264.2656 L1285.5,234 L1275.5,224 L1083.5,224 A0,0 0 0 0 1083.5,224 " fill="#FBFB77" filter="url(#fptncj9lwt5z5)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1275.5,224 L1275.5,234 L1285.5,234 L1275.5,224 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1089.5" y="241.0669">Represents a sequenced</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="1089.5" y="256.1997">computation (monadic bind)</text><!--MD5=[50f9e825a8d7e50e7f676e0be3f97b9a]
reverse link Trampoline<A> to Done<A>--><path d="M295.72,135.15 C237.54,156.64 173.74,181.82 116.5,208 C110.86,210.58 105.03,213.46 99.29,216.42 " fill="none" id="Trampoline&lt;A&gt;&lt;-Done&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="293.62,128.47,314.81,128.16,298.44,141.61,293.62,128.47" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="227.5" y="174.0669">implements</text><!--MD5=[6ba8d18cf10509f356e646cfe4ffb4a5]
reverse link Trampoline<A> to More<A>--><path d="M484.5,151.58 C484.5,173.97 484.5,196.82 484.5,214.08 " fill="none" id="Trampoline&lt;A&gt;&lt;-More&lt;A&gt;" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="477.5,151.32,484.5,131.32,491.5,151.32,477.5,151.32" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="485.5" y="174.0669">implements</text><!--MD5=[ca33c5261e7fe2311c5deae6a07e5e90]
reverse link Trampoline<A> to FlatMap<A, B>--><path d="M670.06,138.03 C738.46,162.92 812.86,190 868.97,210.42 " fill="none" id="Trampoline&lt;A&gt;&lt;-FlatMap&lt;A, B&gt;" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="667.35,144.49,650.95,131.07,672.14,131.34,667.35,144.49" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="778.5" y="174.0669">implements</text><!--MD5=[aa104aad07b9a4c4147cd65ce020fdf7]
@startuml trampoline_structure

hide empty members

interface "Trampoline<A>" <<sealed interface>> {
  + {static} Trampoline<A> done(A value)
  + {static} Trampoline<A> defer(Supplier<Trampoline<A>> next)
  + <B> Trampoline<B> map(Function<A, B> f)
  + <B> Trampoline<B> flatMap(Function<A, Trampoline<B>> f)
  + A run()
  + A runT()
}

class "Done<A>" <<record>> {
  + A value
}

class "More<A>" <<record>> {
  + Supplier<Trampoline<A>> next
}

class "FlatMap<A, B>" <<record>> {
  + Trampoline<A> sub
  + Function<A, Trampoline<B>> f
}

"Done<A>" -up-|> "Trampoline<A>" : implements
"More<A>" -up-|> "Trampoline<A>" : implements
"FlatMap<A, B>" -up-|> "Trampoline<A>" : implements

note right of "Done<A>"
  Represents a completed
  computation with a final value
end note

note right of "More<A>"
  Represents a suspended
  computation (deferred thunk)
end note

note right of "FlatMap<A, B>"
  Represents a sequenced
  computation (monadic bind)
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>