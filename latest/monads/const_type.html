<!DOCTYPE HTML>
<html lang="en" class="latte sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Const - Higher-Kinded Types and Optics for Java</title>


        <!-- Custom HTML head -->


            <meta name="description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">


        <meta name="keywords" content="Higher-Kinded Types, Higher-Kinded-J, Higher-Kinded Java, Higher Kinded Java, HKT, Java, Optics, Lens, Prism, Traversal, Iso, Functional Programming, Monad, Functor, Applicative, Transformer, Monoid, Traverse, higherkindedj">
        
        <meta property="og:title" content="Const - Higher-Kinded Types and Optics for Java"> 
            <meta property="og:description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://higher-kinded-j.github.io/"> 
        
        <meta property="og:image" content="https://higher-kinded-j.github.io/preview.png" />
        <meta property="og:site_name" content="Higher-Kinded-J Documentation" />
        
        
        <meta name="twitter:card" content="summary_large_image" /> <meta name="twitter:title" content="Const - Higher-Kinded Types and Optics for Java - Higher-Kinded-J" />
        <meta name="twitter:description" content="Bringing Higher-Kinded Types and Optics to Java functional patterns" />
        <meta name="twitter:image" content="https://higher-kinded-j.github.io/preview.png" />
        <meta name="description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">
        <meta name="google-site-verification" content="X-xsiAq2cKMLOzh9dexUrX8Onx2h_YMUFgp5lHHUwSg" />
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././mdbook-admonish.css">
        <link rel="stylesheet" href=".././theme/catppuccin.css">
        <link rel="stylesheet" href=".././theme/catppuccin-admonish.css">
        <link rel="stylesheet" href=".././theme/catppuccin-alerts.css">
        <link rel="stylesheet" href=".././theme/additional-hkj.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "latte";
            const default_dark_theme = "macchiato";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('latte')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frappé</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        <div class="version-selector-container">
                            <select id="version-selector" class="version-selector" aria-label="Select documentation version" title="Select documentation version">
                                <option value="">Loading versions...</option>
                            </select>
                        </div>
                    </div>

                    <h1 class="menu-title">Higher-Kinded Types and Optics for Java</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/higher-kinded-j/higher-kinded-j" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/higher-kinded-j/higher-kinded-j/edit/main/hkj-book/src/monads/const_type.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="the-const-type-constant-functors-with-phantom-types"><a class="header" href="#the-const-type-constant-functors-with-phantom-types">The Const Type: Constant Functors with Phantom Types</a></h1>
<div id="admonition-what-youll-learn" class="admonition admonish-info" role="note" aria-labelledby="admonition-what-youll-learn-title">
<div class="admonition-title">
<div id="admonition-what-youll-learn-title">
<p>What You'll Learn</p>
</div>
<a class="admonition-anchor-link" href="#admonition-what-youll-learn"></a>
</div>
<div>
<ul>
<li>Understanding phantom types and how Const ignores its second type parameter</li>
<li>Using Const for efficient fold implementations and data extraction</li>
<li>Leveraging Const with bifunctor operations to transform constant values</li>
<li>Applying Const in lens and traversal patterns for compositional getters</li>
<li>Real-world use cases in validation, accumulation, and data mining</li>
<li>How Const relates to Scala's Const and van Laarhoven lenses</li>
</ul>
</div>
</div>
<div id="admonition-see-example-code" class="admonition admonish-example" role="note" aria-labelledby="admonition-see-example-code-title">
<div class="admonition-title">
<div id="admonition-see-example-code-title">
<p>See Example Code:</p>
</div>
<a class="admonition-anchor-link" href="#admonition-see-example-code"></a>
</div>
<div>
<p><a href="https://github.com/higher-kinded-j/higher-kinded-j/blob/main/hkj-examples/src/main/java/org/higherkindedj/example/basic/constant/ConstExample.java">ConstExample.java</a></p>
</div>
</div>
<p>The <code>Const</code> type is a constant functor that holds a value of type <code>C</code> whilst treating <code>A</code> as a <strong>phantom type parameter</strong>—a type that exists only in the type signature but has no runtime representation. This seemingly simple property unlocks powerful patterns for accumulating values, implementing efficient folds, and building compositional getters in the style of van Laarhoven lenses.</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="#admonition-note"></a>
</div>
<div>
<p>New to phantom types? See the <a href="../glossary.html#phantom-type">Glossary</a> for a detailed explanation with Java-focused examples, or continue reading for practical demonstrations.</p>
</div>
</div>
<hr />
<h2 id="what-is-const"><a class="header" href="#what-is-const">What is Const?</a></h2>
<p>A <code>Const&lt;C, A&gt;</code> is a container that holds a single value of type <code>C</code>. The type parameter <code>A</code> is phantom—it influences the type signature for composition and type safety but doesn't correspond to any stored data. This asymmetry is the key to Const's utility.</p>
<pre><code class="language-java">// Create a Const holding a String, with Integer as the phantom type
Const&lt;String, Integer&gt; stringConst = new Const&lt;&gt;("Hello");

// The constant value is always accessible
String value = stringConst.value(); // "Hello"

// Create a Const holding a count, with Person as the phantom type
Const&lt;Integer, Person&gt; countConst = new Const&lt;&gt;(42);
int count = countConst.value(); // 42
</code></pre>
<h3 id="key-characteristics"><a class="header" href="#key-characteristics">Key Characteristics</a></h3>
<ul>
<li><strong>Constant value</strong>: Holds a value of type <code>C</code> that can be retrieved via <code>value()</code></li>
<li><strong>Phantom type</strong>: The type parameter <code>A</code> exists only for type-level composition</li>
<li><strong>Bifunctor instance</strong>: Implements <code>Bifunctor&lt;ConstKind2.Witness&gt;</code> where:
<ul>
<li><code>first(f, const)</code> transforms the constant value</li>
<li><code>second(g, const)</code> changes only the phantom type, leaving the constant value unchanged</li>
<li><code>bimap(f, g, const)</code> combines both transformations (but only <code>f</code> affects the constant)</li>
</ul>
</li>
</ul>
<hr />
<h2 id="core-components"><a class="header" href="#core-components">Core Components</a></h2>
<p><strong>The Const Type</strong></p>
<pre><code class="language-java">public record Const&lt;C, A&gt;(C value) {
  public &lt;D&gt; Const&lt;D, A&gt; mapFirst(Function&lt;? super C, ? extends D&gt; firstMapper);
  public &lt;B&gt; Const&lt;C, B&gt; mapSecond(Function&lt;? super A, ? extends B&gt; secondMapper);
  public &lt;D, B&gt; Const&lt;D, B&gt; bimap(
      Function&lt;? super C, ? extends D&gt; firstMapper,
      Function&lt;? super A, ? extends B&gt; secondMapper);
}
</code></pre>
<p><strong>The HKT Bridge for Const</strong></p>
<ul>
<li><strong><code>ConstKind2&lt;C, A&gt;</code></strong>: The HKT marker interface extending <code>Kind2&lt;ConstKind2.Witness, C, A&gt;</code></li>
<li><strong><code>ConstKind2.Witness</code></strong>: The phantom type witness for Const in the Kind2 system</li>
<li><strong><code>ConstKindHelper</code></strong>: Utility providing <code>widen2</code> and <code>narrow2</code> for Kind2 conversions</li>
</ul>
<p><strong>Type Classes for Const</strong></p>
<ul>
<li><strong><code>ConstBifunctor</code></strong>: The singleton bifunctor instance implementing <code>Bifunctor&lt;ConstKind2.Witness&gt;</code></li>
</ul>
<hr />
<h2 id="the-phantom-type-property"><a class="header" href="#the-phantom-type-property">The Phantom Type Property</a></h2>
<p>The defining characteristic of <code>Const</code> is that mapping over the second type parameter has <strong>no effect</strong> on the constant value. This property is enforced both conceptually and at runtime.</p>
<div id="admonition-example-phantom-type-transformations" class="admonition admonish-example" role="note" aria-labelledby="admonition-example-phantom-type-transformations-title">
<div class="admonition-title">
<div id="admonition-example-phantom-type-transformations-title">
<p>Example: Phantom Type Transformations</p>
</div>
<a class="admonition-anchor-link" href="#admonition-example-phantom-type-transformations"></a>
</div>
<div>
<p><a href="https://github.com/higher-kinded-j/higher-kinded-j/blob/main/hkj-examples/src/main/java/org/higherkindedj/example/basic/constant/ConstExample.java">ConstExample.java</a></p>
<pre><code class="language-java">import static org.higherkindedj.hkt.constant.ConstKindHelper.CONST;

Bifunctor&lt;ConstKind2.Witness&gt; bifunctor = ConstBifunctor.INSTANCE;

// Start with a Const holding an integer count
Const&lt;Integer, String&gt; original = new Const&lt;&gt;(42);
System.out.println("Original value: " + original.value());
// Output: 42

// Use second() to change the phantom type from String to Double
Kind2&lt;ConstKind2.Witness, Integer, Double&gt; transformed =
    bifunctor.second(
        s -&gt; s.length() * 2.0, // Function defines phantom type transformation
        CONST.widen2(original));

Const&lt;Integer, Double&gt; result = CONST.narrow2(transformed);
System.out.println("After second(): " + result.value());
// Output: 42 (UNCHANGED!)

// The phantom type changed (String -&gt; Double), but the constant value stayed 42
</code></pre>
<p><strong>Note:</strong> Whilst the mapper function in <code>second()</code> is never applied to actual data (since <code>A</code> is phantom), it is still validated and applied to <code>null</code> for exception propagation. This maintains consistency with bifunctor exception semantics.</p>
</div>
</div>
<hr />
<h2 id="const-as-a-bifunctor"><a class="header" href="#const-as-a-bifunctor">Const as a Bifunctor</a></h2>
<p><code>Const</code> naturally implements the <code>Bifunctor</code> type class, providing three fundamental operations:</p>
<h3 id="1-first---transform-the-constant-value"><a class="header" href="#1-first---transform-the-constant-value">1. <code>first()</code> - Transform the Constant Value</a></h3>
<p>The <code>first</code> operation transforms the <strong>constant value</strong> from type <code>C</code> to type <code>D</code>, leaving the phantom type unchanged.</p>
<pre><code class="language-java">Const&lt;String, Integer&gt; stringConst = new Const&lt;&gt;("hello");

// Transform the constant value from String to Integer
Kind2&lt;ConstKind2.Witness, Integer, Integer&gt; lengthConst =
    bifunctor.first(String::length, CONST.widen2(stringConst));

Const&lt;Integer, Integer&gt; result = CONST.narrow2(lengthConst);
System.out.println(result.value()); // Output: 5
</code></pre>
<h3 id="2-second---transform-only-the-phantom-type"><a class="header" href="#2-second---transform-only-the-phantom-type">2. <code>second()</code> - Transform Only the Phantom Type</a></h3>
<p>The <code>second</code> operation changes the <strong>phantom type</strong> from <code>A</code> to <code>B</code> without affecting the constant value.</p>
<pre><code class="language-java">Const&lt;String, Integer&gt; stringConst = new Const&lt;&gt;("constant");

// Change the phantom type from Integer to Boolean
Kind2&lt;ConstKind2.Witness, String, Boolean&gt; boolConst =
    bifunctor.second(i -&gt; i &gt; 10, CONST.widen2(stringConst));

Const&lt;String, Boolean&gt; result = CONST.narrow2(boolConst);
System.out.println(result.value()); // Output: "constant" (unchanged)
</code></pre>
<h3 id="3-bimap---transform-both-simultaneously"><a class="header" href="#3-bimap---transform-both-simultaneously">3. <code>bimap()</code> - Transform Both Simultaneously</a></h3>
<p>The <code>bimap</code> operation combines both transformations, but remember: only the first function affects the constant value.</p>
<pre><code class="language-java">Const&lt;String, Integer&gt; original = new Const&lt;&gt;("hello");

Kind2&lt;ConstKind2.Witness, Integer, String&gt; transformed =
    bifunctor.bimap(
        String::length,          // Transforms constant: "hello" -&gt; 5
        i -&gt; "Number: " + i,     // Phantom type transformation only
        CONST.widen2(original));

Const&lt;Integer, String&gt; result = CONST.narrow2(transformed);
System.out.println(result.value()); // Output: 5
</code></pre>
<hr />
<h2 id="use-case-1-efficient-fold-implementations"><a class="header" href="#use-case-1-efficient-fold-implementations">Use Case 1: Efficient Fold Implementations</a></h2>
<p>One of the most practical applications of <code>Const</code> is implementing folds that accumulate a single value whilst traversing a data structure. The phantom type represents the "shape" being traversed, whilst the constant value accumulates the result.</p>
<div id="admonition-example-folding-with-const" class="admonition admonish-example" role="note" aria-labelledby="admonition-example-folding-with-const-title">
<div class="admonition-title">
<div id="admonition-example-folding-with-const-title">
<p>Example: Folding with Const</p>
</div>
<a class="admonition-anchor-link" href="#admonition-example-folding-with-const"></a>
</div>
<div>
<p><a href="https://github.com/higher-kinded-j/higher-kinded-j/blob/main/hkj-examples/src/main/java/org/higherkindedj/example/basic/constant/ConstExample.java">ConstExample.java</a></p>
<pre><code class="language-java">// Count elements in a list using Const
List&lt;String&gt; items = List.of("apple", "banana", "cherry", "date");

Const&lt;Integer, String&gt; count = items.stream()
    .reduce(
        new Const&lt;&gt;(0),                                           // Initial count
        (acc, item) -&gt; new Const&lt;Integer, String&gt;(acc.value() + 1), // Increment
        (c1, c2) -&gt; new Const&lt;&gt;(c1.value() + c2.value()));        // Combine

System.out.println("Count: " + count.value());
// Output: 4

// Accumulate total length of all strings
Const&lt;Integer, String&gt; totalLength = items.stream()
    .reduce(
        new Const&lt;&gt;(0),
        (acc, item) -&gt; new Const&lt;Integer, String&gt;(acc.value() + item.length()),
        (c1, c2) -&gt; new Const&lt;&gt;(c1.value() + c2.value()));

System.out.println("Total length: " + totalLength.value());
// Output: 23
</code></pre>
<p>In this pattern, the phantom type (<code>String</code>) represents the type of elements we're folding over, whilst the constant value (<code>Integer</code>) accumulates the result. This mirrors the implementation of folds in libraries like <a href="https://typelevel.org/cats/datatypes/const.html">Cats</a> and <a href="https://github.com/scalaz/scalaz">Scalaz</a> in Scala.</p>
</div>
</div>
<hr />
<h2 id="use-case-2-getters-and-van-laarhoven-lenses"><a class="header" href="#use-case-2-getters-and-van-laarhoven-lenses">Use Case 2: Getters and Van Laarhoven Lenses</a></h2>
<p><code>Const</code> is fundamental to the lens pattern pioneered by Edward Kmett and popularised in Scala libraries like <a href="https://www.optics.dev/Monocle/">Monocle</a>. A lens is an abstraction for focusing on a part of a data structure, and <code>Const</code> enables the "getter" half of this abstraction.</p>
<h3 id="the-getter-pattern"><a class="header" href="#the-getter-pattern">The Getter Pattern</a></h3>
<p>A getter extracts a field from a structure without transforming it. Using <code>Const</code>, we represent this as a function that produces a <code>Const</code> where the phantom type tracks the source structure.</p>
<div id="admonition-example-compositional-getters" class="admonition admonish-example" role="note" aria-labelledby="admonition-example-compositional-getters-title">
<div class="admonition-title">
<div id="admonition-example-compositional-getters-title">
<p>Example: Compositional Getters</p>
</div>
<a class="admonition-anchor-link" href="#admonition-example-compositional-getters"></a>
</div>
<div>
<p><a href="https://github.com/higher-kinded-j/higher-kinded-j/blob/main/hkj-examples/src/main/java/org/higherkindedj/example/basic/constant/ConstExample.java">ConstExample.java</a></p>
<pre><code class="language-java">record Person(String name, int age, String city) {}
record Company(String name, Person ceo) {}

Person alice = new Person("Alice", 30, "London");
Company acmeCorp = new Company("ACME Corp", alice);

// Define a getter using Const
Function&lt;Person, Const&lt;String, Person&gt;&gt; nameGetter =
    person -&gt; new Const&lt;&gt;(person.name());

// Extract the name
Const&lt;String, Person&gt; nameConst = nameGetter.apply(alice);
System.out.println("CEO name: " + nameConst.value());
// Output: Alice

// Define a getter for the CEO from a Company
Function&lt;Company, Const&lt;Person, Company&gt;&gt; ceoGetter =
    company -&gt; new Const&lt;&gt;(company.ceo());

// Compose getters: get CEO name from Company using mapFirst
Function&lt;Company, Const&lt;String, Company&gt;&gt; ceoNameGetter = company -&gt;
    ceoGetter.apply(company)
        .mapFirst(person -&gt; nameGetter.apply(person).value());

Const&lt;String, Company&gt; result = ceoNameGetter.apply(acmeCorp);
System.out.println("Company CEO name: " + result.value());
// Output: Alice
</code></pre>
<p>This pattern is the foundation of van Laarhoven lenses, where <code>Const</code> is used with <code>Functor</code> or <code>Applicative</code> to implement compositional getters. For a deeper dive, see <a href="https://www.twanvl.nl/blog/haskell/cps-functional-references">Van Laarhoven Lenses</a> and <a href="https://www.optics.dev/Monocle/docs/focus">Scala Monocle</a>.</p>
</div>
</div>
<hr />
<h2 id="use-case-3-data-extraction-from-validation-results"><a class="header" href="#use-case-3-data-extraction-from-validation-results">Use Case 3: Data Extraction from Validation Results</a></h2>
<p>When traversing validation results, you often want to extract accumulated errors or valid data without transforming the individual results. <code>Const</code> provides a clean way to express this pattern.</p>
<div id="admonition-example-validation-data-mining" class="admonition admonish-example" role="note" aria-labelledby="admonition-example-validation-data-mining-title">
<div class="admonition-title">
<div id="admonition-example-validation-data-mining-title">
<p>Example: Validation Data Mining</p>
</div>
<a class="admonition-anchor-link" href="#admonition-example-validation-data-mining"></a>
</div>
<div>
<p><a href="https://github.com/higher-kinded-j/higher-kinded-j/blob/main/hkj-examples/src/main/java/org/higherkindedj/example/basic/constant/ConstExample.java">ConstExample.java</a></p>
<pre><code class="language-java">record ValidationResult(boolean isValid, List&lt;String&gt; errors, Object data) {}

List&lt;ValidationResult&gt; results = List.of(
    new ValidationResult(true, List.of(), "Valid data 1"),
    new ValidationResult(false, List.of("Error A", "Error B"), null),
    new ValidationResult(true, List.of(), "Valid data 2"),
    new ValidationResult(false, List.of("Error C"), null)
);

// Extract all errors using Const
List&lt;String&gt; allErrors = new ArrayList&lt;&gt;();

for (ValidationResult result : results) {
    // Use Const to extract errors, phantom type represents ValidationResult
    Const&lt;List&lt;String&gt;, ValidationResult&gt; errorConst = new Const&lt;&gt;(result.errors());
    allErrors.addAll(errorConst.value());
}

System.out.println("All errors: " + allErrors);
// Output: [Error A, Error B, Error C]

// Count valid results
Const&lt;Integer, ValidationResult&gt; validCount = results.stream()
    .reduce(
        new Const&lt;&gt;(0),
        (acc, result) -&gt; new Const&lt;Integer, ValidationResult&gt;(
            result.isValid() ? acc.value() + 1 : acc.value()),
        (c1, c2) -&gt; new Const&lt;&gt;(c1.value() + c2.value()));

System.out.println("Valid results: " + validCount.value());
// Output: 2
</code></pre>
<p>The phantom type maintains the "context" of what we're extracting from (ValidationResult), whilst the constant value accumulates the data we care about (errors or counts).</p>
</div>
</div>
<hr />
<h2 id="const-vs-other-types"><a class="header" href="#const-vs-other-types">Const vs Other Types</a></h2>
<p>Understanding how <code>Const</code> relates to similar types clarifies its unique role:</p>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>First Parameter</th><th>Second Parameter</th><th>Primary Use</th></tr></thead><tbody>
<tr><td><code>Const&lt;C, A&gt;</code></td><td>Constant value (stored)</td><td>Phantom (not stored)</td><td>Folds, getters, extraction</td></tr>
<tr><td><code>Tuple2&lt;A, B&gt;</code></td><td>First element (stored)</td><td>Second element (stored)</td><td>Pairing related values</td></tr>
<tr><td><code>Identity&lt;A&gt;</code></td><td>Value (stored)</td><td>N/A (single parameter)</td><td>Pure computation wrapper</td></tr>
<tr><td><code>Either&lt;L, R&gt;</code></td><td>Error (sum type)</td><td>Success (sum type)</td><td>Error handling</td></tr>
</tbody></table>
</div>
<p><strong>Use Const when:</strong></p>
<ul>
<li>You need to accumulate a single value during traversal</li>
<li>You're implementing getters or read-only lenses</li>
<li>You want to extract data without transformation</li>
<li>The phantom type provides useful type-level information for composition</li>
</ul>
<p><strong>Use Tuple2 when:</strong></p>
<ul>
<li>You need to store and work with both values</li>
<li>Both parameters represent actual data</li>
</ul>
<p><strong>Use Identity when:</strong></p>
<ul>
<li>You need a minimal monad wrapper with no additional effects</li>
</ul>
<hr />
<h2 id="exception-propagation-note"><a class="header" href="#exception-propagation-note">Exception Propagation Note</a></h2>
<p>Although <code>mapSecond</code> doesn't transform the constant value, the mapper function is still applied to <code>null</code> to ensure exception propagation. This maintains consistency with bifunctor semantics.</p>
<pre><code class="language-java">Const&lt;String, Integer&gt; const_ = new Const&lt;&gt;("value");

// This will throw NullPointerException from the mapper
Const&lt;String, Double&gt; result = const_.mapSecond(i -&gt; {
    if (i == null) throw new NullPointerException("Expected non-null");
    return i * 2.0;
});
</code></pre>
<p>This behaviour ensures that invalid mappers are detected, even though the mapper's result isn't used. For null-safe mappers, simply avoid dereferencing the parameter:</p>
<pre><code class="language-java">// Null-safe phantom type transformation
Const&lt;String, Double&gt; safe = const_.mapSecond(i -&gt; 3.14);
</code></pre>
<hr />
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<ul>
<li><strong>Const&lt;C, A&gt;</strong> holds a constant value of type <code>C</code> with a phantom type parameter <code>A</code></li>
<li><strong>Phantom types</strong> exist only in type signatures, enabling type-safe composition without runtime overhead</li>
<li><strong>Bifunctor operations</strong>:
<ul>
<li><code>first</code> transforms the constant value</li>
<li><code>second</code> changes only the phantom type</li>
<li><code>bimap</code> combines both (but only affects the constant via the first function)</li>
</ul>
</li>
<li><strong>Use cases</strong>:
<ul>
<li>Efficient fold implementations that accumulate a single value</li>
<li>Compositional getters in lens and traversal patterns</li>
<li>Data extraction from complex structures without transformation</li>
</ul>
</li>
<li><strong>Scala heritage</strong>: Mirrors <code>Const</code> in Cats, Scalaz, and Monocle</li>
<li><strong>External resources</strong>:
<ul>
<li><a href="https://typelevel.org/cats/datatypes/const.html">Cats Const Documentation</a></li>
<li><a href="https://www.optics.dev/Monocle/docs/optics/getter">Monocle Getter Optics</a></li>
<li><a href="https://www.twanvl.nl/blog/haskell/cps-functional-references">Van Laarhoven Lenses</a></li>
</ul>
</li>
</ul>
<p>Understanding <code>Const</code> empowers you to write efficient, compositional code for data extraction and accumulation, leveraging patterns battle-tested in the Scala functional programming ecosystem.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../monads/writer_monad.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../transformers/transformers.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../monads/writer_monad.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../transformers/transformers.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../version-switcher.js"></script>
        <script src=".././theme/version-switcher.js"></script>


    </div>
    </body>
</html>
