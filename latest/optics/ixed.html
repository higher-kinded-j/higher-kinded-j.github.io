<!DOCTYPE HTML>
<html lang="en" class="latte sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ixed Type Class - Higher-Kinded Types and Optics for Java</title>


        <!-- Custom HTML head -->


            <meta name="description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">


        <meta name="keywords" content="Higher-Kinded Types, Higher-Kinded-J, Higher-Kinded Java, Higher Kinded Java, HKT, Java, Optics, Lens, Prism, Traversal, Iso, Functional Programming, Monad, Functor, Applicative, Transformer, Monoid, Traverse, higherkindedj">
        
        <meta property="og:title" content="Ixed Type Class - Higher-Kinded Types and Optics for Java"> 
            <meta property="og:description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://higher-kinded-j.github.io/"> 
        
        <meta property="og:image" content="https://higher-kinded-j.github.io/preview.png" />
        <meta property="og:site_name" content="Higher-Kinded-J Documentation" />
        
        
        <meta name="twitter:card" content="summary_large_image" /> <meta name="twitter:title" content="Ixed Type Class - Higher-Kinded Types and Optics for Java - Higher-Kinded-J" />
        <meta name="twitter:description" content="Bringing Higher-Kinded Types and Optics to Java functional patterns" />
        <meta name="twitter:image" content="https://higher-kinded-j.github.io/preview.png" />
        <meta name="description" content="Explore Higher-Kinded Types (HKTs) and Optcs in Java with the Higher-Kinded-J library. Learn about Functors, Applicatives, Monads, Transformers, practical functional patterns, and how to write cleaner, more composable Java code for your projects using Optics.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">
        <meta name="google-site-verification" content="X-xsiAq2cKMLOzh9dexUrX8Onx2h_YMUFgp5lHHUwSg" />
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././mdbook-admonish.css">
        <link rel="stylesheet" href=".././theme/catppuccin.css">
        <link rel="stylesheet" href=".././theme/catppuccin-admonish.css">
        <link rel="stylesheet" href=".././theme/catppuccin-alerts.css">
        <link rel="stylesheet" href=".././theme/additional-hkj.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "latte";
            const default_dark_theme = "macchiato";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('latte')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frapp√©</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        <div class="version-selector-container">
                            <select id="version-selector" class="version-selector" aria-label="Select documentation version" title="Select documentation version">
                                <option value="">Loading versions...</option>
                            </select>
                        </div>
                    </div>

                    <h1 class="menu-title">Higher-Kinded Types and Optics for Java</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/higher-kinded-j/higher-kinded-j" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/higher-kinded-j/higher-kinded-j/edit/main/hkj-book/src/optics/ixed.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="ixed-type-class-safe-indexed-access"><a class="header" href="#ixed-type-class-safe-indexed-access">Ixed Type Class: Safe Indexed Access</a></h1>
<h2 id="zero-or-one-element-traversals"><a class="header" href="#zero-or-one-element-traversals"><em>Zero-or-One Element Traversals</em></a></h2>
<div id="admonition-what-youll-learn" class="admonition admonish-info" role="note" aria-labelledby="admonition-what-youll-learn-title">
<div class="admonition-title">
<div id="admonition-what-youll-learn-title">
<p>What You'll Learn</p>
</div>
<a class="admonition-anchor-link" href="#admonition-what-youll-learn"></a>
</div>
<div>
<ul>
<li>How to safely access and update existing elements in indexed structures</li>
<li>Understanding the <code>Traversal&lt;S, A&gt;</code> pattern for partial access</li>
<li>Factory methods: <code>mapIx()</code>, <code>listIx()</code>, <code>fromAt()</code></li>
<li>The key difference between Ixed (read/update only) and At (full CRUD)</li>
<li>Composing Ixed with Lenses for safe deep access into nested collections</li>
<li>How Ixed is built on At internally using <code>Prisms.some()</code></li>
<li>When to use Ixed vs At vs direct collection operations</li>
<li>Building safe, structure-preserving data pipelines</li>
</ul>
</div>
</div>
<div id="admonition-example-code" class="admonition admonish-note" role="note" aria-labelledby="admonition-example-code-title">
<div class="admonition-title">
<div id="admonition-example-code-title">
<p>Example Code</p>
</div>
<a class="admonition-anchor-link" href="#admonition-example-code"></a>
</div>
<div>
<p><a href="https://github.com/higher-kinded-j/higher-kinded-j/blob/main/hkj-examples/src/main/java/org/higherkindedj/example/optics/IxedUsageExample.java">IxedUsageExample</a></p>
</div>
</div>
<p>In the previous guide on <a href="at.html">At</a>, we explored how to perform full CRUD operations on indexed structures‚Äîinserting new entries, deleting existing ones, and updating values. But what if you only need to <em>read</em> and <em>update</em> elements that already exist, without the ability to insert or delete? What if you want operations that automatically become no-ops when an index is absent, preserving the structure unchanged?</p>
<p>This is where <strong><code>Ixed</code></strong> shines. It provides a <code>Traversal</code> that focuses on zero or one element at a given index‚Äîperfect for safe, partial access patterns where you want to modify existing data without changing the structure's shape.</p>
<hr />
<h2 id="the-scenario-safe-configuration-reading"><a class="header" href="#the-scenario-safe-configuration-reading">The Scenario: Safe Configuration Reading</a></h2>
<p>Consider a configuration system where you need to read and update existing settings, but deliberately want to avoid accidentally creating new entries:</p>
<p><strong>The Data Model:</strong></p>
<pre><code class="language-java">public record ServerConfig(
    String serverName,
    Map&lt;String, String&gt; environment,
    Map&lt;String, Integer&gt; ports,
    List&lt;String&gt; allowedHosts
) {}

public record DatabaseConfig(
    String connectionString,
    Map&lt;String, String&gt; poolSettings,
    List&lt;String&gt; replicaHosts
) {}

public record ApplicationSettings(
    ServerConfig server,
    DatabaseConfig database,
    Map&lt;String, String&gt; featureToggles
) {}
</code></pre>
<p><strong>Common Operations:</strong></p>
<ul>
<li>"Read the current database pool size setting"</li>
<li>"Update the max connections if it exists"</li>
<li>"Modify the port number for an existing service"</li>
<li>"Safely access the nth replica host if it exists"</li>
<li>"Never accidentally create new configuration keys"</li>
</ul>
<p>The key requirement here is <strong>safety</strong>: you want to interact with existing data without risk of accidentally expanding the structure. If a key doesn't exist, the operation should simply do nothing rather than insert a new entry.</p>
<hr />
<h2 id="think-of-ixed-like"><a class="header" href="#think-of-ixed-like">Think of Ixed Like...</a></h2>
<ul>
<li><strong>A read-only database view with UPDATE privileges</strong> üîç: You can SELECT and UPDATE existing rows, but cannot INSERT new ones or DELETE existing ones</li>
<li><strong>A safe array accessor</strong> üõ°Ô∏è: Returns nothing for out-of-bounds indices instead of throwing exceptions</li>
<li><strong>A peephole in a door</strong> üëÅÔ∏è: You can see what's there and modify it if present, but you can't add or remove anything</li>
<li><strong>A library card catalogue lookup</strong> üìö: You can find and update existing book entries, but adding new books requires different permissions</li>
<li><strong>A partial function</strong> üéØ: Operates only where defined, silently ignores undefined inputs</li>
</ul>
<hr />
<h2 id="ixed-vs-at-vs-traversal-vs-prism-understanding-the-relationships"><a class="header" href="#ixed-vs-at-vs-traversal-vs-prism-understanding-the-relationships">Ixed vs At vs Traversal vs Prism: Understanding the Relationships</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Aspect</th><th>Ixed</th><th>At</th><th>Traversal</th><th>Prism</th></tr></thead><tbody>
<tr><td><strong>Focus</strong></td><td>Zero or one element at index</td><td>Optional presence at index</td><td>Zero or more elements</td><td>Zero or one variant case</td></tr>
<tr><td><strong>Can insert?</strong></td><td>‚ùå No</td><td>‚úÖ Yes</td><td>‚ùå No</td><td>‚úÖ Yes (via <code>build</code>)</td></tr>
<tr><td><strong>Can delete?</strong></td><td>‚ùå No</td><td>‚úÖ Yes</td><td>‚ùå No</td><td>‚ùå No</td></tr>
<tr><td><strong>Core operation</strong></td><td><code>Traversal&lt;S, A&gt;</code></td><td><code>Lens&lt;S, Optional&lt;A&gt;&gt;</code></td><td><code>modifyF(f, s, app)</code></td><td><code>getOptional</code>, <code>build</code></td></tr>
<tr><td><strong>Returns</strong></td><td>Traversal (0-or-1 focus)</td><td>Lens to Optional</td><td>Modified structure</td><td>Optional value</td></tr>
<tr><td><strong>Use case</strong></td><td>Safe partial access</td><td>Map/List CRUD</td><td>Bulk modifications</td><td>Sum type handling</td></tr>
<tr><td><strong>Intent</strong></td><td>"Access if exists"</td><td>"Manage entry at index"</td><td>"Transform all elements"</td><td>"Match this case"</td></tr>
<tr><td><strong>Structure change</strong></td><td>‚ùå Never changes</td><td>‚úÖ Can change size</td><td>‚ùå Preserves count</td><td>‚úÖ Can change type</td></tr>
</tbody></table>
</div>
<p><strong>Key Insight</strong>: <code>Ixed</code> is actually built <em>on top of</em> <code>At</code>. Internally, it composes <code>At.at(index)</code> with <code>Prisms.some()</code> to unwrap the Optional layer. This means <code>Ixed</code> inherits the precise boundary behaviour of <code>At</code> whilst removing the ability to insert or delete entries.</p>
<pre><code class="language-java">// Ixed is conceptually:
// at.at(index).asTraversal().andThen(Prisms.some().asTraversal())

// At gives:     Lens&lt;S, Optional&lt;A&gt;&gt;
// Prisms.some() gives: Prism&lt;Optional&lt;A&gt;, A&gt;
// Composed:     Traversal&lt;S, A&gt; focusing on 0-or-1 elements
</code></pre>
<hr />
<h2 id="a-step-by-step-walkthrough"><a class="header" href="#a-step-by-step-walkthrough">A Step-by-Step Walkthrough</a></h2>
<h3 id="step-1-creating-ixed-instances"><a class="header" href="#step-1-creating-ixed-instances">Step 1: Creating Ixed Instances</a></h3>
<p>Like <code>At</code>, <code>Ixed</code> instances are created using factory methods from <code>IxedInstances</code>:</p>
<pre><code class="language-java">import org.higherkindedj.optics.Ixed;
import org.higherkindedj.optics.ixed.IxedInstances;

// Ixed instance for Map&lt;String, Integer&gt;
Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();

// Ixed instance for List&lt;String&gt;
Ixed&lt;List&lt;String&gt;, Integer, String&gt; listIx = IxedInstances.listIx();

// Create Ixed from any At instance
At&lt;Map&lt;String, String&gt;, String, String&gt; customAt = AtInstances.mapAt();
Ixed&lt;Map&lt;String, String&gt;, String, String&gt; customIx = IxedInstances.fromAt(customAt);
</code></pre>
<p>Each factory method returns an <code>Ixed</code> instance parameterised by:</p>
<ul>
<li><code>S</code> ‚Äì The structure type (e.g., <code>Map&lt;String, Integer&gt;</code>)</li>
<li><code>I</code> ‚Äì The index type (e.g., <code>String</code> for maps, <code>Integer</code> for lists)</li>
<li><code>A</code> ‚Äì The element type (e.g., <code>Integer</code>)</li>
</ul>
<h3 id="step-2-safe-read-operations"><a class="header" href="#step-2-safe-read-operations">Step 2: Safe Read Operations</a></h3>
<p><code>Ixed</code> provides safe reading that returns <code>Optional.empty()</code> for missing indices:</p>
<pre><code class="language-java">Map&lt;String, Integer&gt; ports = new HashMap&lt;&gt;();
ports.put("http", 8080);
ports.put("https", 8443);

Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();

// Read existing key
Optional&lt;Integer&gt; httpPort = IxedInstances.get(mapIx, "http", ports);
// Result: Optional[8080]

// Read missing key - no exception, just empty
Optional&lt;Integer&gt; ftpPort = IxedInstances.get(mapIx, "ftp", ports);
// Result: Optional.empty()

// Check existence
boolean hasHttp = IxedInstances.contains(mapIx, "http", ports);
// Result: true

boolean hasFtp = IxedInstances.contains(mapIx, "ftp", ports);
// Result: false
</code></pre>
<p>Compare this to direct map access which might return <code>null</code> or require explicit containment checks.</p>
<h3 id="step-3-update-operations-no-insertion"><a class="header" href="#step-3-update-operations-no-insertion">Step 3: Update Operations (No Insertion!)</a></h3>
<p>The crucial difference from <code>At</code> is that <code>update</code> only modifies <em>existing</em> entries:</p>
<pre><code class="language-java">Map&lt;String, Integer&gt; ports = new HashMap&lt;&gt;();
ports.put("http", 8080);
ports.put("https", 8443);

Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();

// Update existing key - works as expected
Map&lt;String, Integer&gt; updatedPorts = IxedInstances.update(mapIx, "http", 9000, ports);
// Result: {http=9000, https=8443}

// Attempt to "update" non-existent key - NO-OP!
Map&lt;String, Integer&gt; samePorts = IxedInstances.update(mapIx, "ftp", 21, ports);
// Result: {http=8080, https=8443} - NO ftp key added!

// Original unchanged (immutability)
System.out.println(ports); // {http=8080, https=8443}
</code></pre>
<p><strong>This is the defining characteristic of Ixed</strong>: it will never change the structure's shape. If an index doesn't exist, operations silently become no-ops.</p>
<h3 id="step-4-functional-modification"><a class="header" href="#step-4-functional-modification">Step 4: Functional Modification</a></h3>
<p>Apply functions to existing elements only:</p>
<pre><code class="language-java">Map&lt;String, Integer&gt; scores = new HashMap&lt;&gt;();
scores.put("alice", 100);
scores.put("bob", 85);

Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();

// Modify existing value
Map&lt;String, Integer&gt; bonusAlice = IxedInstances.modify(mapIx, "alice", x -&gt; x + 10, scores);
// Result: {alice=110, bob=85}

// Modify non-existent key - no-op
Map&lt;String, Integer&gt; unchanged = IxedInstances.modify(mapIx, "charlie", x -&gt; x + 10, scores);
// Result: {alice=100, bob=85} - no charlie key created
</code></pre>
<p>This pattern is excellent for operations like "increment if exists" or "apply transformation to known entries".</p>
<h3 id="step-5-composition-with-other-optics"><a class="header" href="#step-5-composition-with-other-optics">Step 5: Composition with Other Optics</a></h3>
<p><code>Ixed</code> composes naturally with Lenses for deep, safe access:</p>
<pre><code class="language-java">record Config(Map&lt;String, Integer&gt; settings) {}

Lens&lt;Config, Map&lt;String, Integer&gt;&gt; settingsLens =
    Lens.of(Config::settings, (c, s) -&gt; new Config(s));

Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();

// Compose: Config ‚Üí Map&lt;String, Integer&gt; ‚Üí Integer (0-or-1)
Traversal&lt;Config, Integer&gt; maxConnectionsTraversal =
    settingsLens.asTraversal().andThen(mapIx.ix("maxConnections"));

Config config = new Config(new HashMap&lt;&gt;(Map.of("maxConnections", 100, "timeout", 30)));

// Safe access through composed traversal
List&lt;Integer&gt; values = Traversals.getAll(maxConnectionsTraversal, config);
// Result: [100]

// Safe modification through composed traversal
Config updated = Traversals.modify(maxConnectionsTraversal, x -&gt; x * 2, config);
// Result: Config[settings={maxConnections=200, timeout=30}]

// Missing key = empty focus, modification is no-op
Traversal&lt;Config, Integer&gt; missingTraversal =
    settingsLens.asTraversal().andThen(mapIx.ix("nonexistent"));

Config unchanged = Traversals.modify(missingTraversal, x -&gt; x + 1, config);
// Result: Config unchanged, no "nonexistent" key added
</code></pre>
<p>This composition gives you type-safe, deep access that automatically handles missing intermediate keys.</p>
<hr />
<h2 id="list-operations-safe-indexed-access"><a class="header" href="#list-operations-safe-indexed-access">List Operations: Safe Indexed Access</a></h2>
<p><code>Ixed</code> for lists provides bounds-safe operations:</p>
<h3 id="safe-element-access"><a class="header" href="#safe-element-access">Safe Element Access</a></h3>
<pre><code class="language-java">Ixed&lt;List&lt;String&gt;, Integer, String&gt; listIx = IxedInstances.listIx();

List&lt;String&gt; items = new ArrayList&lt;&gt;(List.of("apple", "banana", "cherry"));

// Access valid index
Optional&lt;String&gt; second = IxedInstances.get(listIx, 1, items);
// Result: Optional["banana"]

// Access out-of-bounds - no exception!
Optional&lt;String&gt; tenth = IxedInstances.get(listIx, 10, items);
// Result: Optional.empty()

// Negative index - safely handled
Optional&lt;String&gt; negative = IxedInstances.get(listIx, -1, items);
// Result: Optional.empty()
</code></pre>
<h3 id="safe-element-update"><a class="header" href="#safe-element-update">Safe Element Update</a></h3>
<pre><code class="language-java">// Update existing index
List&lt;String&gt; updated = IxedInstances.update(listIx, 1, "BANANA", items);
// Result: ["apple", "BANANA", "cherry"]

// Update out-of-bounds - no-op, no exception
List&lt;String&gt; unchanged = IxedInstances.update(listIx, 10, "grape", items);
// Result: ["apple", "banana", "cherry"] - no element added!

// Modify with function
List&lt;String&gt; uppercased = IxedInstances.modify(listIx, 0, String::toUpperCase, items);
// Result: ["APPLE", "banana", "cherry"]

// Original always unchanged
System.out.println(items); // ["apple", "banana", "cherry"]
</code></pre>
<p><strong>Important Contrast with At</strong>: <code>At.insertOrUpdate()</code> on a list will throw <code>IndexOutOfBoundsException</code> for invalid indices (unless using padding), whilst <code>IxedInstances.update()</code> simply returns the list unchanged.</p>
<hr />
<h2 id="when-to-use-ixed-vs-other-approaches"><a class="header" href="#when-to-use-ixed-vs-other-approaches">When to Use Ixed vs Other Approaches</a></h2>
<h3 id="-use-ixed-when"><a class="header" href="#-use-ixed-when">‚úÖ Use <code>Ixed</code> When:</a></h3>
<ul>
<li><strong>You want safe partial access</strong>: Operations that become no-ops on missing indices</li>
<li><strong>Structure preservation is critical</strong>: You must not accidentally add or remove entries</li>
<li><strong>You're reading configuration files</strong>: Accessing known keys without creating defaults</li>
<li><strong>You need composable traversals</strong>: Building deep access paths that handle missing intermediates</li>
<li><strong>You want to avoid exceptions</strong>: Out-of-bounds list access should be safe, not throw</li>
<li><strong>Immutability matters</strong>: All operations return new structures</li>
</ul>
<h3 id="-avoid-ixed-when"><a class="header" href="#-avoid-ixed-when">‚ùå Avoid <code>Ixed</code> When:</a></h3>
<ul>
<li><strong>You need to insert new entries</strong>: Use <code>At.insertOrUpdate()</code> instead</li>
<li><strong>You need to delete entries</strong>: Use <code>At.remove()</code> instead</li>
<li><strong>You want to set defaults for missing keys</strong>: Use <code>At</code> with <code>Optional.of(defaultValue)</code></li>
<li><strong>You need bulk operations</strong>: Use <code>Traversal</code> for all-element modifications</li>
<li><strong>Performance is critical</strong>: Direct collection access may be faster (measure first!)</li>
</ul>
<h3 id="ixed-vs-at-choosing-the-right-tool"><a class="header" href="#ixed-vs-at-choosing-the-right-tool">Ixed vs At: Choosing the Right Tool</a></h3>
<pre><code class="language-java">// Scenario: Update user's email if they exist, do nothing if they don't
Map&lt;String, String&gt; users = new HashMap&lt;&gt;(Map.of("alice", "alice@example.com"));

// With At - DANGER: Might accidentally create user!
At&lt;Map&lt;String, String&gt;, String, String&gt; at = AtInstances.mapAt();
Map&lt;String, String&gt; result1 = at.insertOrUpdate("bob", "bob@example.com", users);
// Result: {alice=alice@example.com, bob=bob@example.com} - Bob added!

// With Ixed - SAFE: Will not create if missing
Ixed&lt;Map&lt;String, String&gt;, String, String&gt; ix = IxedInstances.mapIx();
Map&lt;String, String&gt; result2 = IxedInstances.update(ix, "bob", "bob@example.com", users);
// Result: {alice=alice@example.com} - No Bob, as intended!
</code></pre>
<p>Use <strong>At</strong> when you explicitly want CRUD semantics; use <strong>Ixed</strong> when you want read/update-only with automatic no-ops for missing indices.</p>
<hr />
<h2 id="common-pitfalls"><a class="header" href="#common-pitfalls">Common Pitfalls</a></h2>
<h3 id="-dont-expect-ixed-to-insert-new-entries"><a class="header" href="#-dont-expect-ixed-to-insert-new-entries">‚ùå Don't: Expect Ixed to insert new entries</a></h3>
<pre><code class="language-java">Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();
Map&lt;String, Integer&gt; empty = new HashMap&lt;&gt;();

Map&lt;String, Integer&gt; result = IxedInstances.update(mapIx, "key", 100, empty);
// Result: {} - STILL EMPTY! No insertion occurred.

// If you need insertion, use At instead:
At&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapAt = AtInstances.mapAt();
Map&lt;String, Integer&gt; withKey = mapAt.insertOrUpdate("key", 100, empty);
// Result: {key=100}
</code></pre>
<h3 id="-do-use-ixed-for-safe-non-inserting-updates"><a class="header" href="#-do-use-ixed-for-safe-non-inserting-updates">‚úÖ Do: Use Ixed for safe, non-inserting updates</a></h3>
<pre><code class="language-java">// Perfect for updating known configuration keys
Map&lt;String, String&gt; config = new HashMap&lt;&gt;(Map.of("theme", "dark", "language", "en"));

Ixed&lt;Map&lt;String, String&gt;, String, String&gt; ix = IxedInstances.mapIx();

// Only updates keys that exist
Map&lt;String, String&gt; updated = IxedInstances.update(ix, "theme", "light", config);
// Result: {theme=light, language=en}

// Typo in key name? No problem - just a no-op
Map&lt;String, String&gt; unchanged = IxedInstances.update(ix, "tehme", "light", config); // typo!
// Result: {theme=dark, language=en} - no new key created
</code></pre>
<hr />
<h3 id="-dont-assume-update-failure-means-an-error"><a class="header" href="#-dont-assume-update-failure-means-an-error">‚ùå Don't: Assume update failure means an error</a></h3>
<pre><code class="language-java">Ixed&lt;List&lt;String&gt;, Integer, String&gt; listIx = IxedInstances.listIx();
List&lt;String&gt; items = new ArrayList&lt;&gt;(List.of("a", "b", "c"));

List&lt;String&gt; result = IxedInstances.update(listIx, 10, "z", items);
// Result is the same list - but this is SUCCESS, not failure!
// The operation correctly did nothing because index 10 doesn't exist.
</code></pre>
<h3 id="-do-check-for-existence-first-if-you-need-to-know"><a class="header" href="#-do-check-for-existence-first-if-you-need-to-know">‚úÖ Do: Check for existence first if you need to know</a></h3>
<pre><code class="language-java">Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();
Map&lt;String, Integer&gt; scores = new HashMap&lt;&gt;(Map.of("alice", 100));

// If you need to know whether update will succeed:
if (IxedInstances.contains(mapIx, "bob", scores)) {
    Map&lt;String, Integer&gt; updated = IxedInstances.update(mapIx, "bob", 90, scores);
    System.out.println("Updated Bob's score");
} else {
    System.out.println("Bob not found - consider using At to insert");
}
</code></pre>
<hr />
<h3 id="-dont-forget-that-ixed-inherits-ats-null-value-limitations"><a class="header" href="#-dont-forget-that-ixed-inherits-ats-null-value-limitations">‚ùå Don't: Forget that Ixed inherits At's null value limitations</a></h3>
<pre><code class="language-java">Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
map.put("nullValue", null);

Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();
Optional&lt;Integer&gt; result = IxedInstances.get(mapIx, "nullValue", map);
// Result: Optional.empty() - NOT Optional.of(null)!

// Java's Optional cannot hold null values
// This is inherited from the underlying At implementation
</code></pre>
<h3 id="-do-avoid-null-values-in-collections"><a class="header" href="#-do-avoid-null-values-in-collections">‚úÖ Do: Avoid null values in collections</a></h3>
<pre><code class="language-java">// Use sentinel values or wrapper types if you need to distinguish null from absent
Map&lt;String, Optional&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();
map.put("maybeNull", Optional.empty()); // Explicitly absent value
map.put("hasValue", Optional.of(42));   // Present value

// Or use At directly if you need to distinguish presence from null
At&lt;Map&lt;String, Integer&gt;, String, Integer&gt; at = AtInstances.mapAt();
// at.contains("key", map) checks key presence, not value
</code></pre>
<hr />
<h2 id="performance-considerations"><a class="header" href="#performance-considerations">Performance Considerations</a></h2>
<h3 id="immutability-overhead"><a class="header" href="#immutability-overhead">Immutability Overhead</a></h3>
<p>Like <code>At</code>, all <code>Ixed</code> operations create new collection instances:</p>
<pre><code class="language-java">Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();

// Each operation creates a new HashMap copy - O(n)
Map&lt;String, Integer&gt; step1 = IxedInstances.update(mapIx, "a", 1, original);   // Copy
Map&lt;String, Integer&gt; step2 = IxedInstances.modify(mapIx, "b", x -&gt; x + 1, step1); // Copy
Map&lt;String, Integer&gt; step3 = IxedInstances.update(mapIx, "c", 3, step2);     // Copy
</code></pre>
<p><strong>Best Practice</strong>: Batch modifications when possible, or accept the immutability overhead for correctness:</p>
<pre><code class="language-java">// For multiple updates, consider direct immutable construction
Map&lt;String, Integer&gt; result = new HashMap&lt;&gt;(original);
result.put("a", 1);  // Mutable during construction
result.compute("b", (k, v) -&gt; v != null ? v + 1 : v);
result.put("c", 3);
// Now use Ixed for subsequent safe operations
</code></pre>
<h3 id="composition-overhead"><a class="header" href="#composition-overhead">Composition Overhead</a></h3>
<p>Composed traversals have minimal overhead since they're just function compositions:</p>
<pre><code class="language-java">// Composition is cheap - just wraps functions
Traversal&lt;Config, Integer&gt; deep = lens.asTraversal().andThen(mapIx.ix("key"));

// The overhead is in the actual modification, not the composition
Config result = Traversals.modify(deep, x -&gt; x + 1, config);
</code></pre>
<h3 id="compared-to-at"><a class="header" href="#compared-to-at">Compared to At</a></h3>
<p><code>Ixed</code> has essentially the same performance characteristics as <code>At</code> since it's built on top of it. The additional Prism composition adds negligible overhead.</p>
<hr />
<h2 id="real-world-example-safe-feature-toggle-reader"><a class="header" href="#real-world-example-safe-feature-toggle-reader">Real-World Example: Safe Feature Toggle Reader</a></h2>
<p>Consider a system where feature toggles are read from external configuration but should never be accidentally created:</p>
<pre><code class="language-java">public class SafeFeatureReader {

    private final Ixed&lt;Map&lt;String, Boolean&gt;, String, Boolean&gt; featureIx =
        IxedInstances.mapIx();
    private final Map&lt;String, Boolean&gt; features;

    public SafeFeatureReader(Map&lt;String, Boolean&gt; initialFeatures) {
        // Create immutable snapshot
        this.features = new HashMap&lt;&gt;(initialFeatures);
    }

    public boolean isEnabled(String featureName) {
        // Safe read - returns false for unknown features
        return IxedInstances.get(featureIx, featureName, features).orElse(false);
    }

    public boolean isKnownFeature(String featureName) {
        return IxedInstances.contains(featureIx, featureName, features);
    }

    public Map&lt;String, Boolean&gt; withFeatureUpdated(String featureName, boolean enabled) {
        // Safe update - only modifies existing features
        // Will NOT add new features even if called with unknown name
        return IxedInstances.update(featureIx, featureName, enabled, features);
    }

    public Map&lt;String, Boolean&gt; withFeatureToggled(String featureName) {
        // Safe toggle - flips value if exists, no-op if missing
        return IxedInstances.modify(featureIx, featureName, current -&gt; !current, features);
    }

    public Set&lt;String&gt; getKnownFeatures() {
        return Collections.unmodifiableSet(features.keySet());
    }
}

// Usage
Map&lt;String, Boolean&gt; config = Map.of(
    "dark_mode", true,
    "new_dashboard", false,
    "beta_features", true
);

SafeFeatureReader reader = new SafeFeatureReader(config);

// Safe reads
System.out.println(reader.isEnabled("dark_mode"));      // true
System.out.println(reader.isEnabled("unknown"));        // false (default)
System.out.println(reader.isKnownFeature("unknown"));   // false

// Safe updates - won't create new features
Map&lt;String, Boolean&gt; updated = reader.withFeatureUpdated("new_dashboard", true);
// Result: {dark_mode=true, new_dashboard=true, beta_features=true}

Map&lt;String, Boolean&gt; unchanged = reader.withFeatureUpdated("typo_feature", true);
// Result: {dark_mode=true, new_dashboard=false, beta_features=true}
// No "typo_feature" added!

// Safe toggle
Map&lt;String, Boolean&gt; toggled = reader.withFeatureToggled("beta_features");
// Result: {dark_mode=true, new_dashboard=false, beta_features=false}
</code></pre>
<p>This pattern ensures configuration integrity‚Äîyou can never accidentally pollute your feature flags with typos or unknown keys.</p>
<hr />
<h2 id="complete-runnable-example"><a class="header" href="#complete-runnable-example">Complete, Runnable Example</a></h2>
<p>Here's a comprehensive example demonstrating all major Ixed features:</p>
<pre><code class="language-java">package org.higherkindedj.example.optics;

import java.util.*;
import org.higherkindedj.optics.At;
import org.higherkindedj.optics.Ixed;
import org.higherkindedj.optics.Lens;
import org.higherkindedj.optics.Traversal;
import org.higherkindedj.optics.annotations.GenerateLenses;
import org.higherkindedj.optics.at.AtInstances;
import org.higherkindedj.optics.ixed.IxedInstances;
import org.higherkindedj.optics.util.Traversals;

public class IxedUsageExample {

    @GenerateLenses
    public record ServerConfig(
        String name,
        Map&lt;String, Integer&gt; ports,
        Map&lt;String, String&gt; environment,
        List&lt;String&gt; allowedOrigins
    ) {}

    public static void main(String[] args) {
        System.out.println("=== Ixed Type Class Usage Examples ===\n");

        // 1. Basic Map Operations - Safe Access Only
        System.out.println("--- Map Safe Access (No Insertion) ---");

        Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapIx = IxedInstances.mapIx();
        Map&lt;String, Integer&gt; ports = new HashMap&lt;&gt;(Map.of("http", 8080, "https", 8443));

        System.out.println("Initial ports: " + ports);

        // Safe read
        System.out.println("HTTP port: " + IxedInstances.get(mapIx, "http", ports));
        System.out.println("FTP port (missing): " + IxedInstances.get(mapIx, "ftp", ports));

        // Safe update - only existing keys
        Map&lt;String, Integer&gt; updatedPorts = IxedInstances.update(mapIx, "http", 9000, ports);
        System.out.println("After update 'http': " + updatedPorts);

        // Attempted update of non-existent key - NO-OP!
        Map&lt;String, Integer&gt; samePorts = IxedInstances.update(mapIx, "ftp", 21, ports);
        System.out.println("After 'update' non-existent 'ftp': " + samePorts);
        System.out.println("FTP was NOT added (Ixed doesn't insert)");

        // Modify with function
        Map&lt;String, Integer&gt; doubled = IxedInstances.modify(mapIx, "https", x -&gt; x * 2, ports);
        System.out.println("After doubling 'https': " + doubled);

        System.out.println("Original unchanged: " + ports);
        System.out.println();

        // 2. Contrast with At (CRUD)
        System.out.println("--- Ixed vs At: Insertion Behaviour ---");

        At&lt;Map&lt;String, Integer&gt;, String, Integer&gt; mapAt = AtInstances.mapAt();

        Map&lt;String, Integer&gt; empty = new HashMap&lt;&gt;();

        // At CAN insert
        Map&lt;String, Integer&gt; withNew = mapAt.insertOrUpdate("newKey", 42, empty);
        System.out.println("At.insertOrUpdate on empty map: " + withNew);

        // Ixed CANNOT insert
        Map&lt;String, Integer&gt; stillEmpty = IxedInstances.update(mapIx, "newKey", 42, empty);
        System.out.println("Ixed.update on empty map: " + stillEmpty);
        System.out.println("Ixed preserves structure - no insertion occurred");
        System.out.println();

        // 3. List Safe Indexed Access
        System.out.println("--- List Safe Indexed Access ---");

        Ixed&lt;List&lt;String&gt;, Integer, String&gt; listIx = IxedInstances.listIx();
        List&lt;String&gt; origins = new ArrayList&lt;&gt;(List.of("localhost", "example.com", "api.example.com"));

        System.out.println("Initial origins: " + origins);

        // Safe bounds checking
        System.out.println("Index 1: " + IxedInstances.get(listIx, 1, origins));
        System.out.println("Index 10 (out of bounds): " + IxedInstances.get(listIx, 10, origins));
        System.out.println("Index -1 (negative): " + IxedInstances.get(listIx, -1, origins));

        // Safe update within bounds
        List&lt;String&gt; updated = IxedInstances.update(listIx, 1, "www.example.com", origins);
        System.out.println("After update index 1: " + updated);

        // Update out of bounds - no-op, no exception!
        List&lt;String&gt; unchanged = IxedInstances.update(listIx, 10, "invalid.com", origins);
        System.out.println("After 'update' out-of-bounds index 10: " + unchanged);
        System.out.println("No exception thrown, list unchanged");

        // Functional modification
        List&lt;String&gt; uppercased = IxedInstances.modify(listIx, 0, String::toUpperCase, origins);
        System.out.println("After uppercase index 0: " + uppercased);

        System.out.println("Original unchanged: " + origins);
        System.out.println();

        // 4. Composition with Lenses
        System.out.println("--- Deep Composition: Lens + Ixed ---");

        // Use generated lenses from @GenerateLenses annotation
        Lens&lt;ServerConfig, Map&lt;String, Integer&gt;&gt; portsLens = ServerConfigLenses.ports();
        Lens&lt;ServerConfig, Map&lt;String, String&gt;&gt; envLens = ServerConfigLenses.environment();

        ServerConfig config = new ServerConfig(
            "production",
            new HashMap&lt;&gt;(Map.of("http", 8080, "https", 8443, "ws", 8765)),
            new HashMap&lt;&gt;(Map.of("NODE_ENV", "production", "LOG_LEVEL", "info")),
            new ArrayList&lt;&gt;(List.of("*.example.com"))
        );

        System.out.println("Initial config: " + config);

        // Compose: ServerConfig ‚Üí Map&lt;String, Integer&gt; ‚Üí Integer (0-or-1)
        Ixed&lt;Map&lt;String, Integer&gt;, String, Integer&gt; portIx = IxedInstances.mapIx();
        Traversal&lt;ServerConfig, Integer&gt; httpPortTraversal =
            portsLens.asTraversal().andThen(portIx.ix("http"));

        // Safe access through composition
        List&lt;Integer&gt; httpPorts = Traversals.getAll(httpPortTraversal, config);
        System.out.println("HTTP port via traversal: " + httpPorts);

        // Safe modification through composition
        ServerConfig updatedConfig = Traversals.modify(httpPortTraversal, p -&gt; p + 1000, config);
        System.out.println("After incrementing HTTP port: " + updatedConfig.ports());

        // Non-existent key = empty focus
        Traversal&lt;ServerConfig, Integer&gt; ftpPortTraversal =
            portsLens.asTraversal().andThen(portIx.ix("ftp"));

        List&lt;Integer&gt; ftpPorts = Traversals.getAll(ftpPortTraversal, config);
        System.out.println("FTP port (missing): " + ftpPorts);

        ServerConfig stillSameConfig = Traversals.modify(ftpPortTraversal, p -&gt; p + 1, config);
        System.out.println("After 'modify' missing FTP: " + stillSameConfig.ports());
        System.out.println("Config unchanged - Ixed didn't insert FTP");
        System.out.println();

        // 5. Checking existence
        System.out.println("--- Existence Checking ---");

        System.out.println("Contains 'http': " + IxedInstances.contains(portIx, "http", config.ports()));
        System.out.println("Contains 'ftp': " + IxedInstances.contains(portIx, "ftp", config.ports()));

        // Pattern: Check before deciding on operation
        String keyToUpdate = "ws";
        if (IxedInstances.contains(portIx, keyToUpdate, config.ports())) {
            Map&lt;String, Integer&gt; newPorts = IxedInstances.update(portIx, keyToUpdate, 9999, config.ports());
            System.out.println("WebSocket port updated to 9999: " + newPorts);
        } else {
            System.out.println(keyToUpdate + " not found - would need At to insert");
        }
        System.out.println();

        // 6. Building Ixed from At
        System.out.println("--- Creating Ixed from At ---");

        At&lt;Map&lt;String, String&gt;, String, String&gt; stringMapAt = AtInstances.mapAt();
        Ixed&lt;Map&lt;String, String&gt;, String, String&gt; envIx = IxedInstances.fromAt(stringMapAt);

        Map&lt;String, String&gt; env = config.environment();
        System.out.println("Initial environment: " + env);

        // Use derived Ixed for safe operations
        Map&lt;String, String&gt; updatedEnv = IxedInstances.update(envIx, "LOG_LEVEL", "debug", env);
        System.out.println("After update LOG_LEVEL: " + updatedEnv);

        Map&lt;String, String&gt; unchangedEnv = IxedInstances.update(envIx, "NEW_VAR", "value", env);
        System.out.println("After 'update' non-existent NEW_VAR: " + unchangedEnv);
        System.out.println("NEW_VAR not added - Ixed from At still can't insert");

        System.out.println("\n=== All operations maintain immutability and structure ===");
    }
}
</code></pre>
<p><strong>Expected Output:</strong></p>
<pre><code>=== Ixed Type Class Usage Examples ===

--- Map Safe Access (No Insertion) ---
Initial ports: {http=8080, https=8443}
HTTP port: Optional[8080]
FTP port (missing): Optional.empty
After update 'http': {http=9000, https=8443}
After 'update' non-existent 'ftp': {http=8080, https=8443}
FTP was NOT added (Ixed doesn't insert)
After doubling 'https': {http=8080, https=16886}
Original unchanged: {http=8080, https=8443}

--- Ixed vs At: Insertion Behaviour ---
At.insertOrUpdate on empty map: {newKey=42}
Ixed.update on empty map: {}
Ixed preserves structure - no insertion occurred

--- List Safe Indexed Access ---
Initial origins: [localhost, example.com, api.example.com]
Index 1: Optional[example.com]
Index 10 (out of bounds): Optional.empty
Index -1 (negative): Optional.empty
After update index 1: [localhost, www.example.com, api.example.com]
After 'update' out-of-bounds index 10: [localhost, example.com, api.example.com]
No exception thrown, list unchanged
After uppercase index 0: [LOCALHOST, example.com, api.example.com]
Original unchanged: [localhost, example.com, api.example.com]

--- Deep Composition: Lens + Ixed ---
Initial config: ServerConfig[name=production, ports={http=8080, https=8443, ws=8765}, environment={NODE_ENV=production, LOG_LEVEL=info}, allowedOrigins=[*.example.com]]
HTTP port via traversal: [8080]
After incrementing HTTP port: {http=9080, https=8443, ws=8765}
FTP port (missing): []
After 'modify' missing FTP: {http=8080, https=8443, ws=8765}
Config unchanged - Ixed didn't insert FTP

--- Existence Checking ---
Contains 'http': true
Contains 'ftp': false
WebSocket port updated to 9999: {http=8080, https=8443, ws=9999}

--- Creating Ixed from At ---
Initial environment: {NODE_ENV=production, LOG_LEVEL=info}
After update LOG_LEVEL: {NODE_ENV=production, LOG_LEVEL=debug}
After 'update' non-existent NEW_VAR: {NODE_ENV=production, LOG_LEVEL=info}
NEW_VAR not added - Ixed from At still can't insert

=== All operations maintain immutability and structure ===
</code></pre>
<hr />
<h2 id="further-reading"><a class="header" href="#further-reading">Further Reading</a></h2>
<ul>
<li><a href="https://hackage.haskell.org/package/lens/docs/Control-Lens-At.html#t:Ixed">Haskell Lens Library - Ixed Type Class</a></li>
<li><a href="https://leanpub.com/optics-by-example">Optics By Example</a> - Comprehensive optics guide</li>
<li><a href="at.html">At Type Class Guide</a> - Full CRUD operations with insert/delete</li>
<li><a href="traversals.html">Traversals Guide</a> - Bulk operations on collections</li>
<li><a href="prisms.html">Prisms Guide</a> - Understanding the <code>some()</code> Prism used internally</li>
</ul>
<hr />
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>The <strong>Ixed</strong> type class provides a powerful abstraction for safe, partial access to indexed structures:</p>
<ul>
<li><strong>Traversal to existing elements</strong>: <code>ix(index)</code> returns <code>Traversal&lt;S, A&gt;</code> focusing on 0-or-1 elements</li>
<li><strong>No insertion or deletion</strong>: Operations become no-ops for missing indices</li>
<li><strong>Structure preservation</strong>: The shape of your data never changes unexpectedly</li>
<li><strong>Built on At</strong>: Inherits precise semantics whilst removing CRUD mutations</li>
<li><strong>Composable</strong>: Chains naturally with other optics for safe deep access</li>
<li><strong>Exception-free</strong>: Out-of-bounds access returns empty, doesn't throw</li>
</ul>
<p>Ixed complements At by providing read/update-only semantics when you need safe partial access without the risk of accidentally modifying your data structure's shape. Use Ixed when correctness and structure preservation matter more than the ability to insert or delete entries.</p>
<hr />
<p><a href="at.html">Previous: At Type Class</a> | <a href="profunctor_optics.html">Next: Profunctor Optics</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../optics/at.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../optics/profunctor_optics.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../optics/at.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../optics/profunctor_optics.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../version-switcher.js"></script>


    </div>
    </body>
</html>
