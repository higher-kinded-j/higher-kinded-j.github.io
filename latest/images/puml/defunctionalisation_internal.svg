<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="459px" preserveAspectRatio="none" style="width:830px;height:459px;background:#24273A;" version="1.1" viewBox="0 0 830 459" width="830px" zoomAndPan="magnify"><defs/><g><rect fill="#24273A" height="459" style="stroke:none;stroke-width:1;" width="830" x="0" y="0"/><!--cluster Defunctionalisation Pattern For Library-Defined Types (Id, Maybe, IO, Transformers)--><g class="cluster" data-entity="Defunctionalisation Pattern For Library-Defined Types .Id. Maybe. IO. Transformers." data-source-line="5" data-uid="ent0002" id="cluster_Defunctionalisation Pattern For Library-Defined Types .Id. Maybe. IO. Transformers."><path d="M7.5,6.016 L512.1756,6.016 A2.25,2.25 0 0 1 513.6756,7.516 L520.6756,28.3601 L821.5,28.3601 A1.5,1.5 0 0 1 823,29.8601 L823,451.266 A1.5,1.5 0 0 1 821.5,452.766 L7.5,452.766 A1.5,1.5 0 0 1 6,451.266 L6,7.516 A1.5,1.5 0 0 1 7.5,6.016" fill="#24273A" style="stroke:#CAD3F5;stroke-width:1.5;"/><line style="stroke:#CAD3F5;stroke-width:1.5;" x1="6" x2="520.6756" y1="28.3601" y2="28.3601"/><text fill="#CAD3F5" font-family="Helvetica" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="501.6756" x="10" y="20.8441">Defunctionalisation Pattern For Library-Defined Types (Id, Maybe, IO, Transformers)</text></g><g class="entity" data-entity="WitnessNote" data-source-line="7" data-uid="ent0003" id="entity_WitnessNote"><path d="M209.25,42.516 L209.25,82.2043 A1.5,1.5 0 0 0 210.75,83.7043 L403.2432,83.7043 A1.5,1.5 0 0 0 404.7432,82.2043 L404.7432,51.016 L394.7432,41.016 L210.75,41.016 A1.5,1.5 0 0 0 209.25,42.516" fill="#EED49F" style="stroke:#24273A;stroke-width:0.5;"/><path d="M394.7432,41.016 L394.7432,50.266 A0.75,0.75 0 0 0 395.4932,51.016 L404.7432,51.016 L394.7432,41.016" fill="#EED49F" style="stroke:#24273A;stroke-width:1;"/><text fill="#24273A" font-family="Helvetica" font-size="12" lengthAdjust="spacing" textLength="159.1332" x="215.25" y="58.8441">All Witness types implement</text><text fill="#24273A" font-family="Helvetica" font-size="12" lengthAdjust="spacing" textLength="174.4932" x="215.25" y="75.1882">WitnessArity&lt;TypeArity.Unary&gt;</text></g><!--class IdKindInterface--><g class="entity" data-entity="IdKindInterface" data-source-line="9" data-uid="ent0004" id="entity_IdKindInterface"><rect fill="#24273A" height="56.1362" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="469.2032" x="22.4" y="262.666"/><rect fill="#363A4F" height="31.792" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2;" width="469.2032" x="22.4" y="262.666"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2;" width="469.2032" x="22.4" y="292.9581"/><rect fill="none" height="56.1362" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="469.2032" x="22.4" y="262.666"/><ellipse cx="224.5815" cy="278.562" fill="#B4A7E5" rx="10" ry="10" style="stroke:#181818;stroke-width:1;"/><path d="M222.1597,283.062 L222.1597,281.8589 L223.8315,281.6714 L223.8315,275.8902 L222.1597,275.687 L222.1597,274.4995 L227.2065,274.4995 L227.2065,275.687 L225.5034,275.8902 L225.5034,281.6714 L227.2065,281.8589 L227.2065,283.062 L222.1597,283.062 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="46.0961" x="243.5815" y="284.7701">IdKind</text><rect fill="#24273A" height="18.3441" style="stroke:#C6A0F6;stroke-width:1;stroke-dasharray:2,2;" width="8.744" x="485.8592" y="259.666"/><text fill="#CAD3F5" font-family="Helvetica" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="6.744" x="486.8592" y="273.4941">A</text><line style="stroke:#C6A0F6;stroke-width:2;" x1="23.4" x2="490.6032" y1="294.4581" y2="294.4581"/><text fill="#A6DA95" font-family="Helvetica" font-size="12" lengthAdjust="spacing" textLength="457.2032" x="28.4" y="311.2862">class Witness implements WitnessArity&lt;Unary&gt; {} ' Nested phantom Witness type</text></g><!--class Kind--><g class="entity" data-entity="Kind" data-source-line="10" data-uid="ent0005" id="entity_Kind"><rect fill="#24273A" height="31.792" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="61.6481" x="226.18" y="144.706"/><rect fill="#363A4F" height="31.792" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2;" width="61.6481" x="226.18" y="144.706"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2;" width="61.6481" x="226.18" y="174.9981"/><rect fill="none" height="31.792" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="61.6481" x="226.18" y="144.706"/><ellipse cx="240.18" cy="160.602" fill="#B4A7E5" rx="10" ry="10" style="stroke:#181818;stroke-width:1;"/><path d="M237.7581,165.102 L237.7581,163.8989 L239.43,163.7114 L239.43,157.9302 L237.7581,157.727 L237.7581,156.5395 L242.805,156.5395 L242.805,157.727 L241.1019,157.9302 L241.1019,163.7114 L242.805,163.8989 L242.805,165.102 L237.7581,165.102 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="31.6481" x="253.18" y="166.8101">Kind</text></g><!--class IdRecord--><g class="entity" data-entity="IdRecord" data-source-line="13" data-uid="ent0007" id="entity_IdRecord"><rect fill="#24273A" height="31.792" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="142.2082" x="185.9" y="404.976"/><rect fill="#363A4F" height="31.792" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2;" width="142.2082" x="185.9" y="404.976"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2;" width="142.2082" x="185.9" y="435.2681"/><rect fill="none" height="31.792" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="142.2082" x="185.9" y="404.976"/><ellipse cx="199.9" cy="420.872" fill="#ADD1B2" rx="10" ry="10" style="stroke:#181818;stroke-width:1;"/><path d="M199.6188,425.497 Q198.3688,425.497 197.5719,424.9814 Q196.775,424.4502 196.3844,423.497 Q195.9938,422.5439 195.9938,421.2627 Q195.9938,419.8408 196.4625,418.8252 Q196.9313,417.7939 197.8375,417.247 Q198.7438,416.6845 200.0563,416.6845 Q200.6813,416.6845 201.15,416.8095 Q201.6344,416.9345 202.1188,417.1689 L201.5406,418.6064 Q201.1031,418.372 200.7125,418.2939 Q200.3375,418.2158 199.9938,418.2158 Q199.1656,418.2158 198.6656,418.5908 Q198.1813,418.9502 197.9625,419.622 Q197.7594,420.2939 197.7594,421.2002 Q197.7594,422.6064 198.2594,423.2939 Q198.775,423.9658 199.9,423.9658 Q200.3219,423.9658 200.7594,423.8564 Q201.1969,423.747 201.7906,423.4814 L201.7906,425.0439 Q201.275,425.2783 200.7125,425.3877 Q200.15,425.497 199.6188,425.497 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" lengthAdjust="spacing" textLength="112.2082" x="212.9" y="427.0801">Id&lt;A&gt;(value: A)</text></g><!--class IdKindHelper--><g class="entity" data-entity="IdKindHelper" data-source-line="17" data-uid="ent0010" id="entity_IdKindHelper"><rect fill="#24273A" height="72.4803" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="280.0738" x="526.96" y="254.496"/><rect fill="#363A4F" height="31.792" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2;" width="280.0738" x="526.96" y="254.496"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2;" width="280.0738" x="526.96" y="284.7881"/><rect fill="none" height="72.4803" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="280.0738" x="526.96" y="254.496"/><ellipse cx="613.2448" cy="270.392" fill="#ADD1B2" rx="10" ry="10" style="stroke:#181818;stroke-width:1;"/><path d="M612.9635,275.017 Q611.7135,275.017 610.9167,274.5014 Q610.1198,273.9702 609.7292,273.017 Q609.3385,272.0639 609.3385,270.7827 Q609.3385,269.3608 609.8073,268.3452 Q610.276,267.3139 611.1823,266.767 Q612.0885,266.2045 613.401,266.2045 Q614.026,266.2045 614.4948,266.3295 Q614.9792,266.4545 615.4635,266.6889 L614.8854,268.1264 Q614.4479,267.892 614.0573,267.8139 Q613.6823,267.7358 613.3385,267.7358 Q612.5104,267.7358 612.0104,268.1108 Q611.526,268.4702 611.3073,269.142 Q611.1042,269.8139 611.1042,270.7202 Q611.1042,272.1264 611.6042,272.8139 Q612.1198,273.4858 613.2448,273.4858 Q613.6667,273.4858 614.1042,273.3764 Q614.5417,273.267 615.1354,273.0014 L615.1354,274.5639 Q614.6198,274.7983 614.0573,274.9077 Q613.4948,275.017 612.9635,275.017 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" lengthAdjust="spacing" textLength="99.5042" x="632.2448" y="276.6001">IdKindHelper</text><line style="stroke:#C6A0F6;stroke-width:2;" x1="527.96" x2="806.0338" y1="286.2881" y2="286.2881"/><ellipse cx="537.96" cy="299.9601" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#A6DA95" font-family="Helvetica" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="234.5896" x="545.96" y="303.1162">widen(id: Id&lt;A&gt;): Kind&lt;IdKind.Witness, A&gt;</text><ellipse cx="537.96" cy="316.3042" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#A6DA95" font-family="Helvetica" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="255.0738" x="545.96" y="319.4603">narrow(kind: Kind&lt;IdKind.Witness, A&gt;): Id&lt;A&gt;</text></g><!--class IdentityMonad--><g class="entity" data-entity="IdentityMonad" data-source-line="23" data-uid="ent0012" id="entity_IdentityMonad"><rect fill="#24273A" height="31.792" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="140.9122" x="596.54" y="144.706"/><rect fill="#363A4F" height="31.792" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2;" width="140.9122" x="596.54" y="144.706"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2;" width="140.9122" x="596.54" y="174.9981"/><rect fill="none" height="31.792" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="140.9122" x="596.54" y="144.706"/><ellipse cx="610.54" cy="160.602" fill="#ADD1B2" rx="10" ry="10" style="stroke:#181818;stroke-width:1;"/><path d="M610.2588,165.227 Q609.0088,165.227 608.2119,164.7114 Q607.415,164.1802 607.0244,163.227 Q606.6338,162.2739 606.6338,160.9927 Q606.6338,159.5708 607.1025,158.5552 Q607.5713,157.5239 608.4775,156.977 Q609.3838,156.4145 610.6963,156.4145 Q611.3213,156.4145 611.79,156.5395 Q612.2744,156.6645 612.7588,156.8989 L612.1806,158.3364 Q611.7431,158.102 611.3525,158.0239 Q610.9775,157.9458 610.6338,157.9458 Q609.8056,157.9458 609.3056,158.3208 Q608.8213,158.6802 608.6025,159.352 Q608.3994,160.0239 608.3994,160.9302 Q608.3994,162.3364 608.8994,163.0239 Q609.415,163.6958 610.54,163.6958 Q610.9619,163.6958 611.3994,163.5864 Q611.8369,163.477 612.4306,163.2114 L612.4306,164.7739 Q611.915,165.0083 611.3525,165.1177 Q610.79,165.227 610.2588,165.227 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" lengthAdjust="spacing" textLength="110.9122" x="623.54" y="166.8101">IdentityMonad</text></g><!--class Monad--><g class="entity" data-entity="Monad" data-uid="ent0013" id="entity_Monad"><rect fill="#24273A" height="31.792" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="80.0801" x="626.96" y="46.466"/><rect fill="#363A4F" height="31.792" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2;" width="80.0801" x="626.96" y="46.466"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2;" width="80.0801" x="626.96" y="76.7581"/><rect fill="none" height="31.792" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2;" width="80.0801" x="626.96" y="46.466"/><ellipse cx="640.96" cy="62.362" fill="#B4A7E5" rx="10" ry="10" style="stroke:#181818;stroke-width:1;"/><path d="M638.5381,66.862 L638.5381,65.6589 L640.21,65.4714 L640.21,59.6902 L638.5381,59.487 L638.5381,58.2995 L643.585,58.2995 L643.585,59.487 L641.8819,59.6902 L641.8819,65.4714 L643.585,65.6589 L643.585,66.862 L638.5381,66.862 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="50.0801" x="653.96" y="68.5701">Monad</text></g><!--reverse link Kind to IdKindInterface--><g class="link" data-entity-1="Kind" data-entity-2="IdKindInterface" data-source-line="10" data-uid="lnk6" id="link_Kind_IdKindInterface"><path d="M257,194.796 C257,215.876 257,236.336 257,262.456" fill="none" id="Kind-backto-IdKindInterface" style="stroke:#F5BDE6;stroke-width:1;"/><polygon fill="none" points="257,176.796,251,194.796,263,194.796,257,176.796" style="stroke:#F5BDE6;stroke-width:1;"/></g><!--reverse link IdKindInterface to IdRecord--><g class="link" data-entity-1="IdKindInterface" data-entity-2="IdRecord" data-uid="lnk8" id="link_IdKindInterface_IdRecord"><path d="M243.6617,337.0735 C240.2317,363.2535 243.29,383.836 248.18,404.826" fill="none" id="IdKindInterface-backto-IdRecord" style="stroke:#F5BDE6;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="246,319.226,237.7125,336.2941,249.6109,337.8529,246,319.226" style="stroke:#F5BDE6;stroke-width:1;"/></g><!--link IdRecord to IdKindInterface--><g class="link" data-entity-1="IdRecord" data-entity-2="IdKindInterface" data-source-line="15" data-uid="lnk9" id="link_IdRecord_IdKindInterface"><path codeLine="15" d="M265.82,404.826 C270.71,383.836 273.7683,363.2535 270.3383,337.0735" fill="none" id="IdRecord-to-IdKindInterface" style="stroke:#F5BDE6;stroke-width:1;"/><polygon fill="none" points="268,319.226,264.3891,337.8529,276.2875,336.2941,268,319.226" style="stroke:#F5BDE6;stroke-width:1;"/></g><!--link IdKindHelper to IdRecord--><g class="link" data-entity-1="IdKindHelper" data-entity-2="IdRecord" data-source-line="21" data-uid="lnk11" id="link_IdKindHelper_IdRecord"><path codeLine="21" d="M552.79,327.426 C471.64,352.786 372.4267,383.7959 311.8367,402.7359" fill="none" id="IdKindHelper-to-IdRecord" style="stroke:#F5BDE6;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#F5BDE6" points="306.11,404.526,315.8935,405.6586,310.8823,403.0342,313.5067,398.023,306.11,404.526" style="stroke:#F5BDE6;stroke-width:1;"/><text fill="#CAD3F5" font-family="Helvetica" font-size="12" lengthAdjust="spacing" textLength="75.0606" x="450.71" y="370.8041">casts to/from</text></g><!--reverse link Monad to IdentityMonad--><g class="link" data-entity-1="Monad" data-entity-2="IdentityMonad" data-uid="lnk14" id="link_Monad_IdentityMonad"><path d="M667,96.396 C667,114.366 667,126.276 667,144.346" fill="none" id="Monad-backto-IdentityMonad" style="stroke:#F5BDE6;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="667,78.396,661,96.396,673,96.396,667,78.396" style="stroke:#F5BDE6;stroke-width:1;"/></g><!--link IdentityMonad to IdKindHelper--><g class="link" data-entity-1="IdentityMonad" data-entity-2="IdKindHelper" data-source-line="26" data-uid="lnk15" id="link_IdentityMonad_IdKindHelper"><path codeLine="26" d="M667,176.796 C667,195.756 667,222.776 667,248.226" fill="none" id="IdentityMonad-to-IdKindHelper" style="stroke:#F5BDE6;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#F5BDE6" points="667,254.226,671,245.226,667,249.226,663,245.226,667,254.226" style="stroke:#F5BDE6;stroke-width:1;"/><text fill="#CAD3F5" font-family="Helvetica" font-size="12" lengthAdjust="spacing" textLength="25.6802" x="668" y="220.3241">uses</text></g><!--SRC=[TLDDZzCm4BtdLmovj1LDSgzMbI8XH0Mx8BGhBbnSPxgnrb-o9vIgzBypJRAfMrWV8cS-thptCdcdhDHTWz0I-RYggY3svREYjjjs4ODqbj1IAPsfh7IHHA5a9GLvtqcfR664bAqIv0glXQNEw89QD5WPeMpLNqlFqQnLF0IDfmCOD5iCCSkya2_Y6I7_WBlEIbBE2gsYE5_Wco32OE6Z2_15ROC8XuBhbCK67WyU8ymtpHBknM6BIzXyNS9Z43RkN30CliZXc6N0nphY2RNMy4EHnHY1-cvbl6PsbdxQCL47HOUxCtP_Avyiprpd8E9hwmDZ3QYAVGax8HbwqtnMjhchXyhXRJEbyJSRs4JeQuPaEQ8jeLupInYFr29Eaoxqfj10Ro05nnFCu04ZiHk-PUUTkTBNevxwvumvCJjG557lKk29UNQPd_V5yrz2TxY2UZ6A-exIXURVvelGOp9ogY-AF-lRoknwsZdt2RN7aFWt119ptiEHbu-KFC6UDydELRCQT2rMRtdxlsPsBxZz_8LBt-nRZCXNWX9MPRc-A5n1BaLaFyXLk-1CVYEFlUBFTi-RtOpwaaZgPn-uOPEknmoU8bxxSqKmXHqO9fIP9V_EaScT_W80]--></g></svg>